<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Class: Irc::User
  
    &mdash; Documentation by YARD 0.8.7.6
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  hasFrames = window.top.frames.main ? true : false;
  relpath = '../';
  framesUrl = "../frames.html#!Irc/User.html";
</script>


  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="../_index.html">Index (U)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../Irc.html" title="Irc (module)">Irc</a></span></span>
     &raquo; 
    <span class="title">User</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../class_list.html">
      Class List
    </a>
  
    <a class="full_list_link" id="method_list_link"
        href="../method_list.html">
      Method List
    </a>
  
    <a class="full_list_link" id="file_list_link"
        href="../file_list.html">
      File List
    </a>
  
</div>
      <div class="clear"></div>
    </div>

    <iframe id="search_frame"></iframe>

    <div id="content"><h1>Class: Irc::User
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName"><span class='object_link'><a href="Netmask.html" title="Irc::Netmask (class)">Netmask</a></span></span>
      
        <ul class="fullTree">
          <li><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></li>
          
            <li class="next"><span class='object_link'><a href="Netmask.html" title="Irc::Netmask (class)">Netmask</a></span></li>
          
            <li class="next">Irc::User</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">/home/apoc/projects/ruby/rbot/lib/rbot/irc.rb<span class="defines">,<br />
  /home/apoc/projects/ruby/rbot/lib/rbot/botuser.rb,<br /> /home/apoc/projects/ruby/rbot/lib/rbot/core/userdata.rb</span>
</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>An IRC User is identified by his/her Netmask (which must not have globs).
In fact, User is just a subclass of Netmask.</p>

<p>Ideally, the user and host information of an IRC User should never change,
and it shouldn&#39;t contain glob patterns. However, IRC is somewhat
idiosincratic and it may be possible to know the nick of a User much before
its user and host are known. Moreover, some networks (namely Freenode) may
change the hostname of a User when (s)he identifies with Nickserv.</p>

<p>As a consequence, we must allow changes to a User host and user attributes.
We impose a restriction, though: they may not contain glob patterns, except
for the special case of an unknown user/host which is represented by a *.</p>

<p>It is possible to create a totally unknown User (e.g. for initializations)
by setting the nick to * too.</p>

<p>TODO list:</p>
<ul><li>
<p>see if it&#39;s worth to add the other USER data</p>
</li><li>
<p>see if it&#39;s worth to add NICKSERV status</p>
</li></ul>


  </div>
</div>
<div class="tags">
  

</div><div id="subclasses">
  <h2>Direct Known Subclasses</h2>
  <p class="children"><span class='object_link'><a href="../WebServiceUser.html" title="WebServiceUser (class)">WebServiceUser</a></span></p>
</div>




  <h2>Instance Attribute Summary <small>(<a href="#" class="summary_toggle">collapse</a>)</small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#idle_since-instance_method" title="#idle_since (instance method)">- (Object) <strong>idle_since</strong> </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute idle_since.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#real_name-instance_method" title="#real_name (instance method)">- (Object) <strong>real_name</strong> </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute real_name.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#signon-instance_method" title="#signon (instance method)">- (Object) <strong>signon</strong> </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute signon.</p>
</div></span>
  
</li>

    
  </ul>



  
  
  <h3 class="inherited">Attributes inherited from <span class='object_link'><a href="Netmask.html" title="Irc::Netmask (class)">Netmask</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Netmask.html#host-instance_method" title="Irc::Netmask#host (method)">#host</a></span>, <span class='object_link'><a href="Netmask.html#nick-instance_method" title="Irc::Netmask#nick (method)">#nick</a></span>, <span class='object_link'><a href="Netmask.html#user-instance_method" title="Irc::Netmask#user (method)">#user</a></span></p>

  
  
  <h3 class="inherited">Attributes included from <span class='object_link'><a href="ServerOrCasemap.html" title="Irc::ServerOrCasemap (module)">ServerOrCasemap</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="ServerOrCasemap.html#server-instance_method" title="Irc::ServerOrCasemap#server (method)">#server</a></span></p>


  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#away%3D-instance_method" title="#away= (instance method)">- (Object) <strong>away=</strong>(msg = &quot;&quot;) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Set the away status of the user.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#away%3F-instance_method" title="#away? (instance method)">- (Boolean) <strong>away?</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Is the user away?.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#botdata-instance_method" title="#botdata (instance method)">- (Object) <strong>botdata</strong>(key = nil) </a>
    

    
      (also: #get_botdata)
    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Retrive Bot data associated with the receiver.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#botuser-instance_method" title="#botuser (instance method)">- (Object) <strong>botuser</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>A convenience method to automatically found the botuser associated with the
receiver.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#channels-instance_method" title="#channels (instance method)">- (Object) <strong>channels</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#delete_botdata-instance_method" title="#delete_botdata (instance method)">- (Object) <strong>delete_botdata</strong>(*keys) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>This method removes the data associated with the key, returning the value
of the deleted key.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#host%3D-instance_method" title="#host= (instance method)">- (Object) <strong>host=</strong>(newhost) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>We have to allow changing the host of an Irc User due to some networks
(e.g. Freenode) changing hostmasks on the fly.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (User) <strong>initialize</strong>(str = &quot;&quot;, opts = {}) </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Create a new IRC User from a given Netmask (or anything that can be
converted into a Netmask) provided that the given Netmask does not have
globs.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#is_op%3F-instance_method" title="#is_op? (instance method)">- (Boolean) <strong>is_op?</strong>(channel) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#is_voice%3F-instance_method" title="#is_voice? (instance method)">- (Boolean) <strong>is_voice?</strong>(channel) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#known%3F-instance_method" title="#known? (instance method)">- (Boolean) <strong>known?</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Checks if a User is well-known or not by looking at the hostname and user.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#modes_on-instance_method" title="#modes_on (instance method)">- (Object) <strong>modes_on</strong>(channel) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#nick%3D-instance_method" title="#nick= (instance method)">- (Object) <strong>nick=</strong>(newnick) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The nick of a User may be changed freely, but it must not contain glob
patterns.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#replace-instance_method" title="#replace (instance method)">- (Object) <strong>replace</strong>(other) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>We can replace everything at once with data from another User.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#set_botdata-instance_method" title="#set_botdata (instance method)">- (Object) <strong>set_botdata</strong>(key, value = nil, &amp;block) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>This method is used to store Bot data associated with the receiver.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#to_irc_user-instance_method" title="#to_irc_user (instance method)">- (Object) <strong>to_irc_user</strong>(opts = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Since to_irc_user runs the same checks on server and channel as
to_irc_netmask, we just try that and return self if it works.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#user%3D-instance_method" title="#user= (instance method)">- (Object) <strong>user=</strong>(newuser) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>We have to allow changing the user of an Irc User due to some networks
(e.g. Freenode) changing hostmasks on the fly.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#with_botdata-instance_method" title="#with_botdata (instance method)">- (Object) <strong>with_botdata</strong>(&amp;block) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>This method yields the entire Bot data Hash to the block, and stores any
changes done to it, returning a copy of the (changed) Hash.</p>
</div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods inherited from <span class='object_link'><a href="Netmask.html" title="Irc::Netmask (class)">Netmask</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Netmask.html#%3C%3D%3E-instance_method" title="Irc::Netmask#&lt;=&gt; (method)">#<=></a></span>, <span class='object_link'><a href="Netmask.html#%3D%3D-instance_method" title="Irc::Netmask#== (method)">#==</a></span>, <span class='object_link'><a href="Netmask.html#%3D%3D%3D-instance_method" title="Irc::Netmask#=== (method)">#===</a></span>, <span class='object_link'><a href="Netmask.html#downcased-instance_method" title="Irc::Netmask#downcased (method)">#downcased</a></span>, <span class='object_link'><a href="Netmask.html#full_downcase-instance_method" title="Irc::Netmask#full_downcase (method)">#full_downcase</a></span>, <span class='object_link'><a href="Netmask.html#full_irc_downcase-instance_method" title="Irc::Netmask#full_irc_downcase (method)">#full_irc_downcase</a></span>, <span class='object_link'><a href="Netmask.html#fullform-instance_method" title="Irc::Netmask#fullform (method)">#fullform</a></span>, <span class='object_link'><a href="Netmask.html#generalize-instance_method" title="Irc::Netmask#generalize (method)">#generalize</a></span>, <span class='object_link'><a href="Netmask.html#has_irc_glob%3F-instance_method" title="Irc::Netmask#has_irc_glob? (method)">#has_irc_glob?</a></span>, <span class='object_link'><a href="Netmask.html#inspect-instance_method" title="Irc::Netmask#inspect (method)">#inspect</a></span>, <span class='object_link'><a href="Netmask.html#matches%3F-instance_method" title="Irc::Netmask#matches? (method)">#matches?</a></span>, <span class='object_link'><a href="Netmask.html#to_irc_netmask-instance_method" title="Irc::Netmask#to_irc_netmask (method)">#to_irc_netmask</a></span></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="ServerOrCasemap.html" title="Irc::ServerOrCasemap (module)">ServerOrCasemap</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="ServerOrCasemap.html#casemap-instance_method" title="Irc::ServerOrCasemap#casemap (method)">#casemap</a></span>, <span class='object_link'><a href="ServerOrCasemap.html#downcase-instance_method" title="Irc::ServerOrCasemap#downcase (method)">#downcase</a></span>, <span class='object_link'><a href="ServerOrCasemap.html#fits_with_server_and_casemap%3F-instance_method" title="Irc::ServerOrCasemap#fits_with_server_and_casemap? (method)">#fits_with_server_and_casemap?</a></span>, <span class='object_link'><a href="ServerOrCasemap.html#init_server_or_casemap-instance_method" title="Irc::ServerOrCasemap#init_server_or_casemap (method)">#init_server_or_casemap</a></span>, <span class='object_link'><a href="ServerOrCasemap.html#irc_downcase-instance_method" title="Irc::ServerOrCasemap#irc_downcase (method)">#irc_downcase</a></span>, <span class='object_link'><a href="ServerOrCasemap.html#irc_upcase-instance_method" title="Irc::ServerOrCasemap#irc_upcase (method)">#irc_upcase</a></span>, <span class='object_link'><a href="ServerOrCasemap.html#server_and_casemap-instance_method" title="Irc::ServerOrCasemap#server_and_casemap (method)">#server_and_casemap</a></span>, <span class='object_link'><a href="ServerOrCasemap.html#upcase-instance_method" title="Irc::ServerOrCasemap#upcase (method)">#upcase</a></span></p>
<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="Irc::User (class)">User</a></span></tt>) <strong>initialize</strong>(str = &quot;&quot;, opts = {}) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Create a new IRC User from a given Netmask (or anything that can be
converted into a Netmask) provided that the given Netmask does not have
globs.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>ArgumentError</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


953
954
955
956
957
958
959
960
961
962</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/apoc/projects/ruby/rbot/lib/rbot/irc.rb', line 953</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_str'>str</span><span class='op'>=</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_opts'>opts</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='kw'>super</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_str'>str</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_content'> must not have globs (unescaped * or ?)</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_nick'>nick</span><span class='period'>.</span><span class='id identifier rubyid_has_irc_glob?'>has_irc_glob?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_nick'>nick</span> <span class='op'>!=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>*</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_str'>str</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_content'> must not have globs (unescaped * or ?)</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_has_irc_glob?'>has_irc_glob?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_user'>user</span> <span class='op'>!=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>*</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_str'>str</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_content'> must not have globs (unescaped * or ?)</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_host'>host</span><span class='period'>.</span><span class='id identifier rubyid_has_irc_glob?'>has_irc_glob?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_host'>host</span> <span class='op'>!=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>*</span><span class='tstring_end'>&quot;</span></span>
  <span class='ivar'>@away</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='ivar'>@real_name</span> <span class='op'>=</span> <span class='const'>String</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
  <span class='ivar'>@idle_since</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@signon</span> <span class='op'>=</span> <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id="idle_since=-instance_method"></span>
      <div class="method_details first">
  <h3 class="signature first" id="idle_since-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>idle_since</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute idle_since</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


948
949
950</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/apoc/projects/ruby/rbot/lib/rbot/irc.rb', line 948</span>

<span class='kw'>def</span> <span class='id identifier rubyid_idle_since'>idle_since</span>
  <span class='ivar'>@idle_since</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="real_name=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="real_name-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>real_name</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute real_name</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


948
949
950</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/apoc/projects/ruby/rbot/lib/rbot/irc.rb', line 948</span>

<span class='kw'>def</span> <span class='id identifier rubyid_real_name'>real_name</span>
  <span class='ivar'>@real_name</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="signon=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="signon-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>signon</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute signon</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


948
949
950</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/apoc/projects/ruby/rbot/lib/rbot/irc.rb', line 948</span>

<span class='kw'>def</span> <span class='id identifier rubyid_signon'>signon</span>
  <span class='ivar'>@signon</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="away=-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>away=</strong>(msg = &quot;&quot;) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Set the away status of the user. Use away=(nil) or away=(false) to unset
away</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1004
1005
1006
1007
1008
1009
1010</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/apoc/projects/ruby/rbot/lib/rbot/irc.rb', line 1004</span>

<span class='kw'>def</span> <span class='id identifier rubyid_away='>away=</span><span class='lparen'>(</span><span class='id identifier rubyid_msg'>msg</span><span class='op'>=</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_msg'>msg</span>
    <span class='ivar'>@away</span> <span class='op'>=</span> <span class='id identifier rubyid_msg'>msg</span>
  <span class='kw'>else</span>
    <span class='ivar'>@away</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="away?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>away?</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Is the user away?</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


997
998
999</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/apoc/projects/ruby/rbot/lib/rbot/irc.rb', line 997</span>

<span class='kw'>def</span> <span class='id identifier rubyid_away?'>away?</span>
  <span class='kw'>return</span> <span class='ivar'>@away</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="botdata-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>botdata</strong>(key = nil) 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='get_botdata-instance_method'>get_botdata</span></span>
    </span>
  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Retrive Bot data associated with the receiver. This method is intended for
data retrieval only. See #set_bot_data() if you need to alter User data.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


14
15
16</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/apoc/projects/ruby/rbot/lib/rbot/core/userdata.rb', line 14</span>

<span class='kw'>def</span> <span class='id identifier rubyid_botdata'>botdata</span><span class='lparen'>(</span><span class='id identifier rubyid_key'>key</span><span class='op'>=</span><span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='const'>Irc</span><span class='op'>::</span><span class='const'>Utils</span><span class='period'>.</span><span class='id identifier rubyid_bot'>bot</span><span class='period'>.</span><span class='id identifier rubyid_plugins'>plugins</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>userdata</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_get_data'>get_data</span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span><span class='id identifier rubyid_key'>key</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="botuser-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>botuser</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>A convenience method to automatically found the botuser associated with the
receiver</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


936
937
938</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/apoc/projects/ruby/rbot/lib/rbot/botuser.rb', line 936</span>

<span class='kw'>def</span> <span class='id identifier rubyid_botuser'>botuser</span>
  <span class='const'>Irc</span><span class='op'>::</span><span class='const'>Bot</span><span class='op'>::</span><span class='const'>Auth</span><span class='period'>.</span><span class='id identifier rubyid_manager'>manager</span><span class='period'>.</span><span class='id identifier rubyid_irc_to_botuser'>irc_to_botuser</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="channels-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>channels</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1068
1069
1070
1071
1072
1073
1074</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/apoc/projects/ruby/rbot/lib/rbot/irc.rb', line 1068</span>

<span class='kw'>def</span> <span class='id identifier rubyid_channels'>channels</span>
  <span class='kw'>if</span> <span class='ivar'>@server</span>
    <span class='ivar'>@server</span><span class='period'>.</span><span class='id identifier rubyid_channels'>channels</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_ch'>ch</span><span class='op'>|</span> <span class='id identifier rubyid_ch'>ch</span><span class='period'>.</span><span class='id identifier rubyid_has_user?'>has_user?</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
  <span class='kw'>else</span>
    <span class='const'>Array</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="delete_botdata-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>delete_botdata</strong>(*keys) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>This method removes the data associated with the key, returning the value
of the deleted key.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


44
45
46</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/apoc/projects/ruby/rbot/lib/rbot/core/userdata.rb', line 44</span>

<span class='kw'>def</span> <span class='id identifier rubyid_delete_botdata'>delete_botdata</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_keys'>keys</span><span class='rparen'>)</span>
  <span class='const'>Irc</span><span class='op'>::</span><span class='const'>Utils</span><span class='period'>.</span><span class='id identifier rubyid_bot'>bot</span><span class='period'>.</span><span class='id identifier rubyid_plugins'>plugins</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>userdata</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_delete_data'>delete_data</span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_keys'>keys</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="host=-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>host=</strong>(newhost) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>We have to allow changing the host of an Irc User due to some networks
(e.g. Freenode) changing hostmasks on the fly. We still check if the new
host data has glob patterns though.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


984
985
986
987</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/apoc/projects/ruby/rbot/lib/rbot/irc.rb', line 984</span>

<span class='kw'>def</span> <span class='id identifier rubyid_host='>host=</span><span class='lparen'>(</span><span class='id identifier rubyid_newhost'>newhost</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Can&#39;t change the hostname to </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_newhost'>newhost</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='kw'>defined?</span><span class='lparen'>(</span><span class='ivar'>@host</span><span class='rparen'>)</span> <span class='kw'>and</span> <span class='id identifier rubyid_newhost'>newhost</span><span class='period'>.</span><span class='id identifier rubyid_has_irc_glob?'>has_irc_glob?</span>
  <span class='kw'>super</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="is_op?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>is_op?</strong>(channel) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1048
1049
1050
1051
1052
1053
1054
1055
1056</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/apoc/projects/ruby/rbot/lib/rbot/irc.rb', line 1048</span>

<span class='kw'>def</span> <span class='id identifier rubyid_is_op?'>is_op?</span><span class='lparen'>(</span><span class='id identifier rubyid_channel'>channel</span><span class='rparen'>)</span>
  <span class='kw'>case</span> <span class='id identifier rubyid_channel'>channel</span>
  <span class='kw'>when</span> <span class='const'>Channel</span>
    <span class='id identifier rubyid_channel'>channel</span><span class='period'>.</span><span class='id identifier rubyid_has_op?'>has_op?</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='kw'>return</span> <span class='ivar'>@server</span><span class='period'>.</span><span class='id identifier rubyid_channel'>channel</span><span class='lparen'>(</span><span class='id identifier rubyid_channel'>channel</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_has_op?'>has_op?</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='ivar'>@server</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Can&#39;t resolve channel </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_channel'>channel</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="is_voice?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>is_voice?</strong>(channel) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1058
1059
1060
1061
1062
1063
1064
1065
1066</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/apoc/projects/ruby/rbot/lib/rbot/irc.rb', line 1058</span>

<span class='kw'>def</span> <span class='id identifier rubyid_is_voice?'>is_voice?</span><span class='lparen'>(</span><span class='id identifier rubyid_channel'>channel</span><span class='rparen'>)</span>
  <span class='kw'>case</span> <span class='id identifier rubyid_channel'>channel</span>
  <span class='kw'>when</span> <span class='const'>Channel</span>
    <span class='id identifier rubyid_channel'>channel</span><span class='period'>.</span><span class='id identifier rubyid_has_voice?'>has_voice?</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='kw'>return</span> <span class='ivar'>@server</span><span class='period'>.</span><span class='id identifier rubyid_channel'>channel</span><span class='lparen'>(</span><span class='id identifier rubyid_channel'>channel</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_has_voice?'>has_voice?</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='ivar'>@server</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Can&#39;t resolve channel </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_channel'>channel</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="known?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>known?</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Checks if a User is well-known or not by looking at the hostname and user</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


991
992
993</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/apoc/projects/ruby/rbot/lib/rbot/irc.rb', line 991</span>

<span class='kw'>def</span> <span class='id identifier rubyid_known?'>known?</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_nick'>nick</span> <span class='op'>!=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>*</span><span class='tstring_end'>&quot;</span></span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_user'>user</span> <span class='op'>!=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>*</span><span class='tstring_end'>&quot;</span></span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_host'>host</span> <span class='op'>!=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>*</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="modes_on-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>modes_on</strong>(channel) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1038
1039
1040
1041
1042
1043
1044
1045
1046</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/apoc/projects/ruby/rbot/lib/rbot/irc.rb', line 1038</span>

<span class='kw'>def</span> <span class='id identifier rubyid_modes_on'>modes_on</span><span class='lparen'>(</span><span class='id identifier rubyid_channel'>channel</span><span class='rparen'>)</span>
  <span class='kw'>case</span> <span class='id identifier rubyid_channel'>channel</span>
  <span class='kw'>when</span> <span class='const'>Channel</span>
    <span class='id identifier rubyid_channel'>channel</span><span class='period'>.</span><span class='id identifier rubyid_modes_of'>modes_of</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='kw'>return</span> <span class='ivar'>@server</span><span class='period'>.</span><span class='id identifier rubyid_channel'>channel</span><span class='lparen'>(</span><span class='id identifier rubyid_channel'>channel</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_modes_of'>modes_of</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='ivar'>@server</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Can&#39;t resolve channel </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_channel'>channel</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="nick=-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>nick=</strong>(newnick) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>The nick of a User may be changed freely, but it must not contain glob
patterns.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


966
967
968
969</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/apoc/projects/ruby/rbot/lib/rbot/irc.rb', line 966</span>

<span class='kw'>def</span> <span class='id identifier rubyid_nick='>nick=</span><span class='lparen'>(</span><span class='id identifier rubyid_newnick'>newnick</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Can&#39;t change the nick to </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_newnick'>newnick</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='kw'>defined?</span><span class='lparen'>(</span><span class='ivar'>@nick</span><span class='rparen'>)</span> <span class='kw'>and</span> <span class='id identifier rubyid_newnick'>newnick</span><span class='period'>.</span><span class='id identifier rubyid_has_irc_glob?'>has_irc_glob?</span>
  <span class='kw'>super</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="replace-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>replace</strong>(other) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>We can replace everything at once with data from another User</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1024
1025
1026
1027
1028
1029
1030
1031
1032
1033
1034
1035
1036</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/apoc/projects/ruby/rbot/lib/rbot/irc.rb', line 1024</span>

<span class='kw'>def</span> <span class='id identifier rubyid_replace'>replace</span><span class='lparen'>(</span><span class='id identifier rubyid_other'>other</span><span class='rparen'>)</span>
  <span class='kw'>case</span> <span class='id identifier rubyid_other'>other</span>
  <span class='kw'>when</span> <span class='const'>User</span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_nick'>nick</span> <span class='op'>=</span> <span class='id identifier rubyid_other'>other</span><span class='period'>.</span><span class='id identifier rubyid_nick'>nick</span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_user'>user</span> <span class='op'>=</span> <span class='id identifier rubyid_other'>other</span><span class='period'>.</span><span class='id identifier rubyid_user'>user</span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_host'>host</span> <span class='op'>=</span> <span class='id identifier rubyid_other'>other</span><span class='period'>.</span><span class='id identifier rubyid_host'>host</span>
    <span class='ivar'>@server</span> <span class='op'>=</span> <span class='id identifier rubyid_other'>other</span><span class='period'>.</span><span class='id identifier rubyid_server'>server</span>
    <span class='ivar'>@casemap</span> <span class='op'>=</span> <span class='id identifier rubyid_other'>other</span><span class='period'>.</span><span class='id identifier rubyid_casemap'>casemap</span> <span class='kw'>unless</span> <span class='ivar'>@server</span>
    <span class='ivar'>@away</span> <span class='op'>=</span> <span class='id identifier rubyid_other'>other</span><span class='period'>.</span><span class='id identifier rubyid_away?'>away?</span>
  <span class='kw'>else</span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_replace'>replace</span><span class='lparen'>(</span><span class='id identifier rubyid_other'>other</span><span class='period'>.</span><span class='id identifier rubyid_to_irc_user'>to_irc_user</span><span class='lparen'>(</span><span class='id identifier rubyid_server_and_casemap'>server_and_casemap</span><span class='rparen'>)</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="set_botdata-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>set_botdata</strong>(key, value = nil, &amp;block) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>This method is used to store Bot data associated with the receiver. If no
block is passed, <em>value</em> is stored for the key <em>key</em>; if a
block is passed, it will be called with the previous <em>key</em> value as
parameter, and its return value will be stored as the new value. If
<em>value</em> is present in the block form, it will be used to initialize
<em>key</em> if it&#39;s missing.</p>

<p>If you have to do large-scale editing of the Bot data Hash, please use
with_botdata.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


29
30
31</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/apoc/projects/ruby/rbot/lib/rbot/core/userdata.rb', line 29</span>

<span class='kw'>def</span> <span class='id identifier rubyid_set_botdata'>set_botdata</span><span class='lparen'>(</span><span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span><span class='op'>=</span><span class='kw'>nil</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='const'>Irc</span><span class='op'>::</span><span class='const'>Utils</span><span class='period'>.</span><span class='id identifier rubyid_bot'>bot</span><span class='period'>.</span><span class='id identifier rubyid_plugins'>plugins</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>userdata</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_set_data'>set_data</span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="to_irc_user-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>to_irc_user</strong>(opts = {}) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Since to_irc_user runs the same checks on server and channel as
to_irc_netmask, we just try that and return self if it works.</p>

<p>Subclasses of User will return self if possible.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1017
1018
1019
1020</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/apoc/projects/ruby/rbot/lib/rbot/irc.rb', line 1017</span>

<span class='kw'>def</span> <span class='id identifier rubyid_to_irc_user'>to_irc_user</span><span class='lparen'>(</span><span class='id identifier rubyid_opts'>opts</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>self</span> <span class='kw'>if</span> <span class='id identifier rubyid_fits_with_server_and_casemap?'>fits_with_server_and_casemap?</span><span class='lparen'>(</span><span class='id identifier rubyid_opts'>opts</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_full_downcase'>full_downcase</span><span class='period'>.</span><span class='id identifier rubyid_to_irc_user'>to_irc_user</span><span class='lparen'>(</span><span class='id identifier rubyid_opts'>opts</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="user=-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>user=</strong>(newuser) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>We have to allow changing the user of an Irc User due to some networks
(e.g. Freenode) changing hostmasks on the fly. We still check if the new
user data has glob patterns though.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


975
976
977
978</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/apoc/projects/ruby/rbot/lib/rbot/irc.rb', line 975</span>

<span class='kw'>def</span> <span class='id identifier rubyid_user='>user=</span><span class='lparen'>(</span><span class='id identifier rubyid_newuser'>newuser</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Can&#39;t change the username to </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_newuser'>newuser</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='kw'>defined?</span><span class='lparen'>(</span><span class='ivar'>@user</span><span class='rparen'>)</span> <span class='kw'>and</span> <span class='id identifier rubyid_newuser'>newuser</span><span class='period'>.</span><span class='id identifier rubyid_has_irc_glob?'>has_irc_glob?</span>
  <span class='kw'>super</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="with_botdata-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>with_botdata</strong>(&amp;block) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>This method yields the entire Bot data Hash to the block, and stores any
changes done to it, returning a copy of the (changed) Hash.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


37
38
39</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/apoc/projects/ruby/rbot/lib/rbot/core/userdata.rb', line 37</span>

<span class='kw'>def</span> <span class='id identifier rubyid_with_botdata'>with_botdata</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='const'>Irc</span><span class='op'>::</span><span class='const'>Utils</span><span class='period'>.</span><span class='id identifier rubyid_bot'>bot</span><span class='period'>.</span><span class='id identifier rubyid_plugins'>plugins</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>userdata</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_with_data'>with_data</span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

    <div id="footer">
  Generated on Mon Mar  9 04:49:04 2015 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.8.7.6 (ruby-2.2.0).
</div>

  </body>
</html>