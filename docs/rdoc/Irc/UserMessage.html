<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Class: Irc::UserMessage
  
    &mdash; Documentation by YARD 0.8.7.6
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  hasFrames = window.top.frames.main ? true : false;
  relpath = '../';
  framesUrl = "../frames.html#!Irc/UserMessage.html";
</script>


  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="../_index.html">Index (U)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../Irc.html" title="Irc (module)">Irc</a></span></span>
     &raquo; 
    <span class="title">UserMessage</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../class_list.html">
      Class List
    </a>
  
    <a class="full_list_link" id="method_list_link"
        href="../method_list.html">
      Method List
    </a>
  
    <a class="full_list_link" id="file_list_link"
        href="../file_list.html">
      File List
    </a>
  
</div>
      <div class="clear"></div>
    </div>

    <iframe id="search_frame"></iframe>

    <div id="content"><h1>Class: Irc::UserMessage
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName"><span class='object_link'><a href="BasicUserMessage.html" title="Irc::BasicUserMessage (class)">BasicUserMessage</a></span></span>
      
        <ul class="fullTree">
          <li><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></li>
          
            <li class="next"><span class='object_link'><a href="BasicUserMessage.html" title="Irc::BasicUserMessage (class)">BasicUserMessage</a></span></li>
          
            <li class="next">Irc::UserMessage</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">/home/apoc/projects/ruby/rbot/lib/rbot/message.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>class for handling IRC user messages. Includes some utilities for handling
the message, for example in plugins. The <code>message</code> member will
have any bot addressing “^bot: ” removed (address? will return true in this
case)</p>


  </div>
</div>
<div class="tags">
  

</div><div id="subclasses">
  <h2>Direct Known Subclasses</h2>
  <p class="children"><span class='object_link'><a href="NoticeMessage.html" title="Irc::NoticeMessage (class)">NoticeMessage</a></span>, <span class='object_link'><a href="PrivMessage.html" title="Irc::PrivMessage (class)">PrivMessage</a></span></p>
</div>




  <h2>Instance Attribute Summary <small>(<a href="#" class="summary_toggle">collapse</a>)</small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#action-instance_method" title="#action (instance method)">- (Object) <strong>action</strong> </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>for PRIVMSGs, true if the message was a CTCP ACTION (CTCP stuff will be
stripped from the message).</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#channel-instance_method" title="#channel (instance method)">- (Object) <strong>channel</strong> </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>channel the message was in, nil for privately addressed messages.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#ctcp-instance_method" title="#ctcp (instance method)">- (Object) <strong>ctcp</strong> </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>for PRIVMSGs, false unless the message was a CTCP command, in which case it
evaluates to the CTCP command itself (TIME, PING, VERSION, etc).</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#params-instance_method" title="#params (instance method)">- (Object) <strong>params</strong> </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>for plugin messages, the rest of the message, with the plugin name removed.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#plugin-instance_method" title="#plugin (instance method)">- (Object) <strong>plugin</strong> </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>for plugin messages, the name of the plugin invoked by the message.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#replyto-instance_method" title="#replyto (instance method)">- (Object) <strong>replyto</strong> </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>convenience member.</p>
</div></span>
  
</li>

    
  </ul>



  
  
  <h3 class="inherited">Attributes inherited from <span class='object_link'><a href="BasicUserMessage.html" title="Irc::BasicUserMessage (class)">BasicUserMessage</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="BasicUserMessage.html#bot-instance_method" title="Irc::BasicUserMessage#bot (method)">#bot</a></span>, <span class='object_link'><a href="BasicUserMessage.html#ignored-instance_method" title="Irc::BasicUserMessage#ignored (method)">#ignored</a></span>, <span class='object_link'><a href="BasicUserMessage.html#in_thread-instance_method" title="Irc::BasicUserMessage#in_thread (method)">#in_thread</a></span>, <span class='object_link'><a href="BasicUserMessage.html#logmessage-instance_method" title="Irc::BasicUserMessage#logmessage (method)">#logmessage</a></span>, <span class='object_link'><a href="BasicUserMessage.html#message-instance_method" title="Irc::BasicUserMessage#message (method)">#message</a></span>, <span class='object_link'><a href="BasicUserMessage.html#plainmessage-instance_method" title="Irc::BasicUserMessage#plainmessage (method)">#plainmessage</a></span>, <span class='object_link'><a href="BasicUserMessage.html#replied-instance_method" title="Irc::BasicUserMessage#replied (method)">#replied</a></span>, <span class='object_link'><a href="BasicUserMessage.html#server-instance_method" title="Irc::BasicUserMessage#server (method)">#server</a></span>, <span class='object_link'><a href="BasicUserMessage.html#source-instance_method" title="Irc::BasicUserMessage#source (method)">#source</a></span>, <span class='object_link'><a href="BasicUserMessage.html#target-instance_method" title="Irc::BasicUserMessage#target (method)">#target</a></span>, <span class='object_link'><a href="BasicUserMessage.html#time-instance_method" title="Irc::BasicUserMessage#time (method)">#time</a></span></p>


  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#act-instance_method" title="#act (instance method)">- (Object) <strong>act</strong>(string, options = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>convenience method to reply to a message with an action.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#action%3F-instance_method" title="#action? (instance method)">- (Boolean) <strong>action?</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#ctcp_reply-instance_method" title="#ctcp_reply (instance method)">- (Object) <strong>ctcp_reply</strong>(string, options = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>send a CTCP response, i.e.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (UserMessage) <strong>initialize</strong>(bot, server, source, target, message) </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><dl class="rdoc-list note-list"><dt>instantiate a new UserMessage bot
<dd><dl class="rdoc-list note-list"><dt>associated bot class source
<dd><dl class="rdoc-list note-list"><dt>hostmask of the message source target
<dd><dl class="rdoc-list note-list"><dt>nick/channel message is destined for message
<dd>
<p>message part.</p>
</dd></dl>
</dd></dl>
</dd></dl>
</dd></dl>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#inspect-instance_method" title="#inspect (instance method)">- (Object) <strong>inspect</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#nickokay-instance_method" title="#nickokay (instance method)">- (Object) <strong>nickokay</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Like the above, but append the username.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#nickreply-instance_method" title="#nickreply (instance method)">- (Object) <strong>nickreply</strong>(string, options = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Same as reply, but when replying in public it adds the nick of the user the
bot is replying to.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#nickreply%21-instance_method" title="#nickreply! (instance method)">- (Object) <strong>nickreply!</strong>(string, options = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Same as nickreply, but always prepend the target&#39;s nick.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#notify-instance_method" title="#notify (instance method)">- (Object) <strong>notify</strong>(msg, opts = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>send a NOTICE to the message source.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#okay-instance_method" title="#okay (instance method)">- (Object) <strong>okay</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>the default okay style is the same as the default reply style.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#plainokay-instance_method" title="#plainokay (instance method)">- (Object) <strong>plainokay</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>convenience method to reply “okay” in the current language to the message.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#plainreply-instance_method" title="#plainreply (instance method)">- (Object) <strong>plainreply</strong>(string, options = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>convenience method to reply to a message, useful in plugins.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#private%3F-instance_method" title="#private? (instance method)">- (Boolean) <strong>private?</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>returns true for private messages, e.g.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#public%3F-instance_method" title="#public? (instance method)">- (Boolean) <strong>public?</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>returns true if the message was in a channel.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#reply-instance_method" title="#reply (instance method)">- (Object) <strong>reply</strong>(string, options = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The general way to reply to a command.</p>
</div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods inherited from <span class='object_link'><a href="BasicUserMessage.html" title="Irc::BasicUserMessage (class)">BasicUserMessage</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="BasicUserMessage.html#address%3F-instance_method" title="Irc::BasicUserMessage#address? (method)">#address?</a></span>, <span class='object_link'><a href="BasicUserMessage.html#botuser-instance_method" title="Irc::BasicUserMessage#botuser (method)">#botuser</a></span>, <span class='object_link'><a href="BasicUserMessage.html#identified%3F-instance_method" title="Irc::BasicUserMessage#identified? (method)">#identified?</a></span>, <span class='object_link'><a href="BasicUserMessage.html#parse_channel_list-instance_method" title="Irc::BasicUserMessage#parse_channel_list (method)">#parse_channel_list</a></span>, <span class='object_link'><a href="BasicUserMessage.html#prefixed%3F-instance_method" title="Irc::BasicUserMessage#prefixed? (method)">#prefixed?</a></span>, <span class='object_link'><a href="BasicUserMessage.html#recurse_depth-instance_method" title="Irc::BasicUserMessage#recurse_depth (method)">#recurse_depth</a></span>, <span class='object_link'><a href="BasicUserMessage.html#recurse_depth%3D-instance_method" title="Irc::BasicUserMessage#recurse_depth= (method)">#recurse_depth=</a></span>, <span class='object_link'><a href="BasicUserMessage.html#sourceaddress-instance_method" title="Irc::BasicUserMessage#sourceaddress (method)">#sourceaddress</a></span>, <span class='object_link'><a href="BasicUserMessage.html#sourcenick-instance_method" title="Irc::BasicUserMessage#sourcenick (method)">#sourcenick</a></span>, <span class='object_link'><a href="BasicUserMessage.html#strip_formatting-class_method" title="Irc::BasicUserMessage.strip_formatting (method)">strip_formatting</a></span>, <span class='object_link'><a href="BasicUserMessage.html#strip_initial_formatting-class_method" title="Irc::BasicUserMessage.strip_initial_formatting (method)">strip_initial_formatting</a></span>, <span class='object_link'><a href="BasicUserMessage.html#stripcolour-class_method" title="Irc::BasicUserMessage.stripcolour (method)">stripcolour</a></span></p>
<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="Irc::UserMessage (class)">UserMessage</a></span></tt>) <strong>initialize</strong>(bot, server, source, target, message) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>instantiate a new UserMessage</p>
<dl class="rdoc-list note-list"><dt>bot
<dd>
<p>associated bot class</p>
</dd><dt>source
<dd>
<p>hostmask of the message source</p>
</dd><dt>target
<dd>
<p>nick/channel message is destined for</p>
</dd><dt>message
<dd>
<p>message part</p>
</dd></dl>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354
355
356
357
358
359
360
361
362
363
364
365
366
367
368
369
370
371
372
373
374
375
376
377
378
379
380
381
382
383
384
385
386
387</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/apoc/projects/ruby/rbot/lib/rbot/message.rb', line 333</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_bot'>bot</span><span class='comma'>,</span> <span class='id identifier rubyid_server'>server</span><span class='comma'>,</span> <span class='id identifier rubyid_source'>source</span><span class='comma'>,</span> <span class='id identifier rubyid_target'>target</span><span class='comma'>,</span> <span class='id identifier rubyid_message'>message</span><span class='rparen'>)</span>
  <span class='kw'>super</span><span class='lparen'>(</span><span class='id identifier rubyid_bot'>bot</span><span class='comma'>,</span> <span class='id identifier rubyid_server'>server</span><span class='comma'>,</span> <span class='id identifier rubyid_source'>source</span><span class='comma'>,</span> <span class='id identifier rubyid_target'>target</span><span class='comma'>,</span> <span class='id identifier rubyid_message'>message</span><span class='rparen'>)</span>
  <span class='ivar'>@target</span> <span class='op'>=</span> <span class='id identifier rubyid_target'>target</span>
  <span class='ivar'>@private</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='ivar'>@plugin</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@ctcp</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='ivar'>@action</span> <span class='op'>=</span> <span class='kw'>false</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_target'>target</span> <span class='op'>==</span> <span class='ivar'>@bot</span><span class='period'>.</span><span class='id identifier rubyid_myself'>myself</span>
    <span class='ivar'>@private</span> <span class='op'>=</span> <span class='kw'>true</span>
    <span class='ivar'>@address</span> <span class='op'>=</span> <span class='kw'>true</span>
    <span class='ivar'>@channel</span> <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='ivar'>@replyto</span> <span class='op'>=</span> <span class='id identifier rubyid_source'>source</span>
  <span class='kw'>else</span>
    <span class='ivar'>@replyto</span> <span class='op'>=</span> <span class='ivar'>@target</span>
    <span class='ivar'>@channel</span> <span class='op'>=</span> <span class='ivar'>@target</span>
  <span class='kw'>end</span>

  <span class='comment'># check for option extra addressing prefixes, e.g &quot;|search foo&quot;, or
</span>  <span class='comment'># &quot;!version&quot; - first match wins
</span>  <span class='id identifier rubyid_bot'>bot</span><span class='period'>.</span><span class='id identifier rubyid_config'>config</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>core.address_prefix</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_mprefix'>mprefix</span><span class='op'>|</span>
    <span class='kw'>if</span> <span class='ivar'>@message</span><span class='period'>.</span><span class='id identifier rubyid_gsub!'>gsub!</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^</span><span class='embexpr_beg'>#{</span><span class='const'>Regexp</span><span class='period'>.</span><span class='id identifier rubyid_escape'>escape</span><span class='lparen'>(</span><span class='id identifier rubyid_mprefix'>mprefix</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>\s*</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
      <span class='ivar'>@address</span> <span class='op'>=</span> <span class='kw'>true</span>
      <span class='ivar'>@prefixed</span> <span class='op'>=</span> <span class='kw'>true</span>
      <span class='kw'>break</span>
    <span class='kw'>end</span>
  <span class='rbrace'>}</span>

  <span class='comment'># even if they used above prefixes, we allow for silly people who
</span>  <span class='comment'># combine all possible types, e.g. &quot;|rbot: hello&quot;, or
</span>  <span class='comment'># &quot;/msg rbot rbot: hello&quot;, etc
</span>  <span class='kw'>if</span> <span class='ivar'>@message</span><span class='period'>.</span><span class='id identifier rubyid_gsub!'>gsub!</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^\s*</span><span class='embexpr_beg'>#{</span><span class='const'>Regexp</span><span class='period'>.</span><span class='id identifier rubyid_escape'>escape</span><span class='lparen'>(</span><span class='id identifier rubyid_bot'>bot</span><span class='period'>.</span><span class='id identifier rubyid_nick'>nick</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>\s*([:;,&gt;]|\s)\s*</span><span class='regexp_end'>/i</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='ivar'>@address</span> <span class='op'>=</span> <span class='kw'>true</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span><span class='lparen'>(</span><span class='ivar'>@message</span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^\001(\S+)(\s(.+))?\001</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span>
    <span class='ivar'>@ctcp</span> <span class='op'>=</span> <span class='backref'>$1</span>
	<span class='comment'># FIXME need to support quoting of NULL and CR/LF, see
</span>	<span class='comment'># http://www.irchelp.org/irchelp/rfc/ctcpspec.html
</span>    <span class='ivar'>@message</span> <span class='op'>=</span> <span class='backref'>$3</span> <span class='op'>||</span> <span class='const'>String</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
    <span class='ivar'>@action</span> <span class='op'>=</span> <span class='ivar'>@ctcp</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ACTION</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_debug'>debug</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Received CTCP command </span><span class='embexpr_beg'>#{</span><span class='ivar'>@ctcp</span><span class='embexpr_end'>}</span><span class='tstring_content'> with options </span><span class='embexpr_beg'>#{</span><span class='ivar'>@message</span><span class='embexpr_end'>}</span><span class='tstring_content'> (action? </span><span class='embexpr_beg'>#{</span><span class='ivar'>@action</span><span class='embexpr_end'>}</span><span class='tstring_content'>)</span><span class='tstring_end'>&quot;</span></span>
    <span class='ivar'>@logmessage</span> <span class='op'>=</span> <span class='ivar'>@message</span><span class='period'>.</span><span class='id identifier rubyid_dup'>dup</span>
    <span class='ivar'>@plainmessage</span> <span class='op'>=</span> <span class='const'>BasicUserMessage</span><span class='period'>.</span><span class='id identifier rubyid_strip_formatting'>strip_formatting</span><span class='lparen'>(</span><span class='ivar'>@message</span><span class='rparen'>)</span>
    <span class='ivar'>@message</span> <span class='op'>=</span> <span class='const'>BasicUserMessage</span><span class='period'>.</span><span class='id identifier rubyid_strip_initial_formatting'>strip_initial_formatting</span><span class='lparen'>(</span><span class='ivar'>@message</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='comment'># free splitting for plugins
</span>  <span class='ivar'>@params</span> <span class='op'>=</span> <span class='ivar'>@message</span><span class='period'>.</span><span class='id identifier rubyid_dup'>dup</span>
  <span class='comment'># Created messges (such as by fake_message) can contain multiple lines
</span>  <span class='kw'>if</span> <span class='ivar'>@params</span><span class='period'>.</span><span class='id identifier rubyid_gsub!'>gsub!</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\A\s*(\S+)[\s$]*</span><span class='regexp_end'>/m</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='ivar'>@plugin</span> <span class='op'>=</span> <span class='backref'>$1</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span>
    <span class='ivar'>@params</span> <span class='op'>=</span> <span class='kw'>nil</span> <span class='kw'>unless</span> <span class='ivar'>@params</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span> <span class='op'>&gt;</span> <span class='int'>0</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id=""></span>
      <div class="method_details first">
  <h3 class="signature first" id="action-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>action</strong>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>for PRIVMSGs, true if the message was a CTCP ACTION (CTCP stuff will be
stripped from the message)</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


326
327
328</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/apoc/projects/ruby/rbot/lib/rbot/message.rb', line 326</span>

<span class='kw'>def</span> <span class='id identifier rubyid_action'>action</span>
  <span class='ivar'>@action</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="channel-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>channel</strong>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>channel the message was in, nil for privately addressed messages</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


316
317
318</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/apoc/projects/ruby/rbot/lib/rbot/message.rb', line 316</span>

<span class='kw'>def</span> <span class='id identifier rubyid_channel'>channel</span>
  <span class='ivar'>@channel</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="ctcp-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>ctcp</strong>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>for PRIVMSGs, false unless the message was a CTCP command, in which case it
evaluates to the CTCP command itself (TIME, PING, VERSION, etc). The CTCP
command parameters are then stored in the message.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


322
323
324</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/apoc/projects/ruby/rbot/lib/rbot/message.rb', line 322</span>

<span class='kw'>def</span> <span class='id identifier rubyid_ctcp'>ctcp</span>
  <span class='ivar'>@ctcp</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="params-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>params</strong>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>for plugin messages, the rest of the message, with the plugin name removed</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


308
309
310</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/apoc/projects/ruby/rbot/lib/rbot/message.rb', line 308</span>

<span class='kw'>def</span> <span class='id identifier rubyid_params'>params</span>
  <span class='ivar'>@params</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="plugin-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>plugin</strong>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>for plugin messages, the name of the plugin invoked by the message</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


304
305
306</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/apoc/projects/ruby/rbot/lib/rbot/message.rb', line 304</span>

<span class='kw'>def</span> <span class='id identifier rubyid_plugin'>plugin</span>
  <span class='ivar'>@plugin</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="replyto-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>replyto</strong>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>convenience member. Who to reply to (i.e. would be sourcenick for a
privately addressed message, or target (the channel) for a publicly
addressed message</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


313
314
315</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/apoc/projects/ruby/rbot/lib/rbot/message.rb', line 313</span>

<span class='kw'>def</span> <span class='id identifier rubyid_replyto'>replyto</span>
  <span class='ivar'>@replyto</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="act-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>act</strong>(string, options = {}) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>convenience method to reply to a message with an action. It&#39;s the same
as doing: <code>@bot.action m.replyto, string</code> So if the message is
private, it will reply to the user. If it was in a channel, it will reply
in the channel.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


466
467
468
469</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/apoc/projects/ruby/rbot/lib/rbot/message.rb', line 466</span>

<span class='kw'>def</span> <span class='id identifier rubyid_act'>act</span><span class='lparen'>(</span><span class='id identifier rubyid_string'>string</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='ivar'>@bot</span><span class='period'>.</span><span class='id identifier rubyid_action'>action</span> <span class='ivar'>@replyto</span><span class='comma'>,</span> <span class='id identifier rubyid_string'>string</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span>
  <span class='ivar'>@replied</span> <span class='op'>=</span> <span class='kw'>true</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="action?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>action?</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


399
400
401</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/apoc/projects/ruby/rbot/lib/rbot/message.rb', line 399</span>

<span class='kw'>def</span> <span class='id identifier rubyid_action?'>action?</span>
  <span class='kw'>return</span> <span class='ivar'>@action</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="ctcp_reply-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>ctcp_reply</strong>(string, options = {}) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>send a CTCP response, i.e. a private NOTICE to the sender with the same
CTCP command and the reply as a parameter</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


473
474
475</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/apoc/projects/ruby/rbot/lib/rbot/message.rb', line 473</span>

<span class='kw'>def</span> <span class='id identifier rubyid_ctcp_reply'>ctcp_reply</span><span class='lparen'>(</span><span class='id identifier rubyid_string'>string</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='ivar'>@bot</span><span class='period'>.</span><span class='id identifier rubyid_ctcp_notice'>ctcp_notice</span> <span class='ivar'>@source</span><span class='comma'>,</span> <span class='ivar'>@ctcp</span><span class='comma'>,</span> <span class='id identifier rubyid_string'>string</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="inspect-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>inspect</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/apoc/projects/ruby/rbot/lib/rbot/message.rb', line 285</span>

<span class='kw'>def</span> <span class='id identifier rubyid_inspect'>inspect</span>
  <span class='id identifier rubyid_fields'>fields</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> plugin=</span><span class='tstring_end'>&#39;</span></span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_plugin'>plugin</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span>
  <span class='id identifier rubyid_fields'>fields</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> params=</span><span class='tstring_end'>&#39;</span></span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_params'>params</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span>
  <span class='id identifier rubyid_fields'>fields</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> channel=</span><span class='tstring_end'>&#39;</span></span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_channel'>channel</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='kw'>if</span> <span class='id identifier rubyid_channel'>channel</span>
  <span class='id identifier rubyid_fields'>fields</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> (reply to </span><span class='tstring_end'>&#39;</span></span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_replyto'>replyto</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>)</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>if</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_private?'>private?</span>
    <span class='id identifier rubyid_fields'>fields</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> (private)</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_fields'>fields</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> (public)</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>end</span>
  <span class='kw'>if</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_action?'>action?</span>
    <span class='id identifier rubyid_fields'>fields</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> (action)</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_ctcp'>ctcp</span>
    <span class='id identifier rubyid_fields'>fields</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> (CTCP </span><span class='tstring_end'>&#39;</span></span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_ctcp'>ctcp</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>)</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>end</span>
  <span class='kw'>super</span><span class='lparen'>(</span><span class='id identifier rubyid_fields'>fields</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="nickokay-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>nickokay</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Like the above, but append the username</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


484
485
486
487
488
489
490
491
492</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/apoc/projects/ruby/rbot/lib/rbot/message.rb', line 484</span>

<span class='kw'>def</span> <span class='id identifier rubyid_nickokay'>nickokay</span>
  <span class='id identifier rubyid_str'>str</span> <span class='op'>=</span> <span class='ivar'>@bot</span><span class='period'>.</span><span class='id identifier rubyid_lang'>lang</span><span class='period'>.</span><span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>okay</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_dup'>dup</span>
  <span class='kw'>if</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_public?'>public?</span>
    <span class='comment'># remove final punctuation
</span>    <span class='id identifier rubyid_str'>str</span><span class='period'>.</span><span class='id identifier rubyid_gsub!'>gsub!</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>[!,.]$</span><span class='regexp_end'>/</span></span><span class='comma'>,</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_str'>str</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>, </span><span class='embexpr_beg'>#{</span><span class='ivar'>@source</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_reply'>reply</span> <span class='id identifier rubyid_str'>str</span><span class='comma'>,</span> <span class='symbol'>:nick</span> <span class='op'>=&gt;</span> <span class='kw'>false</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="nickreply-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>nickreply</strong>(string, options = {}) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Same as reply, but when replying in public it adds the nick of the user the
bot is replying to</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


414
415
416</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/apoc/projects/ruby/rbot/lib/rbot/message.rb', line 414</span>

<span class='kw'>def</span> <span class='id identifier rubyid_nickreply'>nickreply</span><span class='lparen'>(</span><span class='id identifier rubyid_string'>string</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_reply'>reply</span> <span class='id identifier rubyid_string'>string</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='symbol'>:nick</span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="nickreply!-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>nickreply!</strong>(string, options = {}) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Same as nickreply, but always prepend the target&#39;s nick.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


419
420
421</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/apoc/projects/ruby/rbot/lib/rbot/message.rb', line 419</span>

<span class='kw'>def</span> <span class='id identifier rubyid_nickreply!'>nickreply!</span><span class='lparen'>(</span><span class='id identifier rubyid_string'>string</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_reply'>reply</span> <span class='id identifier rubyid_string'>string</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='symbol'>:nick</span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='symbol'>:forcenick</span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="notify-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>notify</strong>(msg, opts = {}) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>send a NOTICE to the message source</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


502
503
504</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/apoc/projects/ruby/rbot/lib/rbot/message.rb', line 502</span>

<span class='kw'>def</span> <span class='id identifier rubyid_notify'>notify</span><span class='lparen'>(</span><span class='id identifier rubyid_msg'>msg</span><span class='comma'>,</span><span class='id identifier rubyid_opts'>opts</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='ivar'>@bot</span><span class='period'>.</span><span class='id identifier rubyid_notice'>notice</span><span class='lparen'>(</span><span class='id identifier rubyid_sourcenick'>sourcenick</span><span class='comma'>,</span> <span class='id identifier rubyid_msg'>msg</span><span class='comma'>,</span> <span class='id identifier rubyid_opts'>opts</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="okay-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>okay</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>the default okay style is the same as the default reply style</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


496
497
498</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/apoc/projects/ruby/rbot/lib/rbot/message.rb', line 496</span>

<span class='kw'>def</span> <span class='id identifier rubyid_okay'>okay</span>
  <span class='ivar'>@bot</span><span class='period'>.</span><span class='id identifier rubyid_config'>config</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>core.reply_with_nick</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>?</span> <span class='id identifier rubyid_nickokay'>nickokay</span> <span class='op'>:</span> <span class='id identifier rubyid_plainokay'>plainokay</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="plainokay-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>plainokay</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>convenience method to reply “okay” in the current language to the message</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


479
480
481</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/apoc/projects/ruby/rbot/lib/rbot/message.rb', line 479</span>

<span class='kw'>def</span> <span class='id identifier rubyid_plainokay'>plainokay</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_reply'>reply</span> <span class='ivar'>@bot</span><span class='period'>.</span><span class='id identifier rubyid_lang'>lang</span><span class='period'>.</span><span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>okay</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='comma'>,</span> <span class='symbol'>:nick</span> <span class='op'>=&gt;</span> <span class='kw'>false</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="plainreply-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>plainreply</strong>(string, options = {}) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>convenience method to reply to a message, useful in plugins. It&#39;s the
same as doing: <code>@bot.say m.replyto, string</code> So if the message is
private, it will reply to the user. If it was in a channel, it will reply
in the channel.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


408
409
410</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/apoc/projects/ruby/rbot/lib/rbot/message.rb', line 408</span>

<span class='kw'>def</span> <span class='id identifier rubyid_plainreply'>plainreply</span><span class='lparen'>(</span><span class='id identifier rubyid_string'>string</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_reply'>reply</span> <span class='id identifier rubyid_string'>string</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='symbol'>:nick</span> <span class='op'>=&gt;</span> <span class='kw'>false</span><span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="private?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>private?</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>returns true for private messages, e.g. “/msg bot hello”</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


390
391
392</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/apoc/projects/ruby/rbot/lib/rbot/message.rb', line 390</span>

<span class='kw'>def</span> <span class='id identifier rubyid_private?'>private?</span>
  <span class='kw'>return</span> <span class='ivar'>@private</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="public?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>public?</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>returns true if the message was in a channel</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


395
396
397</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/apoc/projects/ruby/rbot/lib/rbot/message.rb', line 395</span>

<span class='kw'>def</span> <span class='id identifier rubyid_public?'>public?</span>
  <span class='kw'>return</span> <span class='op'>!</span><span class='ivar'>@private</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="reply-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>reply</strong>(string, options = {}) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>The general way to reply to a command. The following options are available:
:nick [false, true, :auto]</p>

<pre class="code ruby"><code class="ruby">state if the nick of the user calling the command should be prepended
:auto uses core.reply_with_nick</code></pre>

<p>:forcenick [false, true]</p>

<pre class="code ruby"><code class="ruby">if :nick is true, always prepend the target&#39;s nick, even if the nick
already appears in the reply. Defaults to false.</code></pre>

<p>:to [:private, :public, :auto]</p>

<pre class="code ruby"><code class="ruby">where should the bot reply?
:private always reply to the nick
:public reply to the channel (if available)
:auto uses core.private_replies</code></pre>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


437
438
439
440
441
442
443
444
445
446
447
448
449
450
451
452
453
454
455
456
457
458
459</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/apoc/projects/ruby/rbot/lib/rbot/message.rb', line 437</span>

<span class='kw'>def</span> <span class='id identifier rubyid_reply'>reply</span><span class='lparen'>(</span><span class='id identifier rubyid_string'>string</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_opts'>opts</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='symbol'>:nick</span> <span class='op'>=&gt;</span> <span class='symbol'>:auto</span><span class='comma'>,</span> <span class='symbol'>:forcenick</span> <span class='op'>=&gt;</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='symbol'>:to</span> <span class='op'>=&gt;</span> <span class='symbol'>:auto</span><span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span> <span class='id identifier rubyid_options'>options</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_opts'>opts</span><span class='lbracket'>[</span><span class='symbol'>:nick</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='symbol'>:auto</span>
    <span class='id identifier rubyid_opts'>opts</span><span class='lbracket'>[</span><span class='symbol'>:nick</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='ivar'>@bot</span><span class='period'>.</span><span class='id identifier rubyid_config'>config</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>core.reply_with_nick</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='op'>!</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_public?'>public?</span>
    <span class='id identifier rubyid_opts'>opts</span><span class='lbracket'>[</span><span class='symbol'>:to</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='symbol'>:private</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_opts'>opts</span><span class='lbracket'>[</span><span class='symbol'>:to</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='symbol'>:auto</span>
    <span class='id identifier rubyid_opts'>opts</span><span class='lbracket'>[</span><span class='symbol'>:to</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='ivar'>@bot</span><span class='period'>.</span><span class='id identifier rubyid_config'>config</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>core.private_replies</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>?</span> <span class='symbol'>:private</span> <span class='op'>:</span> <span class='symbol'>:public</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='lparen'>(</span><span class='id identifier rubyid_opts'>opts</span><span class='lbracket'>[</span><span class='symbol'>:nick</span><span class='rbracket'>]</span> <span class='op'>&amp;&amp;</span>
      <span class='id identifier rubyid_opts'>opts</span><span class='lbracket'>[</span><span class='symbol'>:to</span><span class='rbracket'>]</span> <span class='op'>!=</span> <span class='symbol'>:private</span> <span class='op'>&amp;&amp;</span>
      <span class='lparen'>(</span><span class='id identifier rubyid_string'>string</span> <span class='op'>!~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(?:^|\W)</span><span class='embexpr_beg'>#{</span><span class='const'>Regexp</span><span class='period'>.</span><span class='id identifier rubyid_escape'>escape</span><span class='lparen'>(</span><span class='ivar'>@source</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>(?:$|\W)</span><span class='regexp_end'>/</span></span> <span class='op'>||</span>
        <span class='id identifier rubyid_opts'>opts</span><span class='lbracket'>[</span><span class='symbol'>:forcenick</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_string'>string</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='ivar'>@source</span><span class='embexpr_end'>}</span><span class='embexpr_beg'>#{</span><span class='ivar'>@bot</span><span class='period'>.</span><span class='id identifier rubyid_config'>config</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>core.nick_postfix</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'> </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_string'>string</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_to'>to</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_opts'>opts</span><span class='lbracket'>[</span><span class='symbol'>:to</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='symbol'>:private</span><span class='rparen'>)</span> <span class='op'>?</span> <span class='id identifier rubyid_source'>source</span> <span class='op'>:</span> <span class='ivar'>@channel</span>
  <span class='ivar'>@bot</span><span class='period'>.</span><span class='id identifier rubyid_say'>say</span> <span class='id identifier rubyid_to'>to</span><span class='comma'>,</span> <span class='id identifier rubyid_string'>string</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span>
  <span class='ivar'>@replied</span> <span class='op'>=</span> <span class='kw'>true</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

    <div id="footer">
  Generated on Mon Mar  9 04:49:06 2015 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.8.7.6 (ruby-2.2.0).
</div>

  </body>
</html>