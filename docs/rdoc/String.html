<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Class: String
  
    &mdash; Documentation by YARD 0.8.7.6
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  hasFrames = window.top.frames.main ? true : false;
  relpath = '';
  framesUrl = "frames.html#!String.html";
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="_index.html">Index (S)</a> &raquo;
    
    
    <span class="title">String</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">
      Class List
    </a>
  
    <a class="full_list_link" id="method_list_link"
        href="method_list.html">
      Method List
    </a>
  
    <a class="full_list_link" id="file_list_link"
        href="file_list.html">
      File List
    </a>
  
</div>
      <div class="clear"></div>
    </div>

    <iframe id="search_frame"></iframe>

    <div id="content"><h1>Class: String
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName"><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></span>
      
        <ul class="fullTree">
          <li><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></li>
          
            <li class="next">String</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">/home/apoc/projects/ruby/rbot/lib/rbot/core/utils/extends.rb<span class="defines">,<br />
  /home/apoc/projects/ruby/rbot/lib/rbot/botuser.rb,<br /> /home/apoc/projects/ruby/rbot/lib/rbot/irc.rb,<br /> /home/apoc/projects/ruby/rbot/lib/rbot/irc.rb,<br /> /home/apoc/projects/ruby/rbot/lib/rbot/irc.rb,<br /> /home/apoc/projects/ruby/rbot/lib/rbot/irc.rb,<br /> /home/apoc/projects/ruby/rbot/lib/rbot/irc.rb,<br /> /home/apoc/projects/ruby/rbot/lib/rbot/ircsocket.rb</span>
</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>We start by extending the String class with some IRC-specific methods</p>


  </div>
</div>
<div class="tags">
  

</div>






  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#colorformat-instance_method" title="#colorformat (instance method)">- (Object) <strong>colorformat</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Format a string using IRC colors.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_html_title-instance_method" title="#get_html_title (instance method)">- (Object) <strong>get_html_title</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>This method tries to find an HTML title in the string, and returns it if
found.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#has_irc_glob%3F-instance_method" title="#has_irc_glob? (instance method)">- (Boolean) <strong>has_irc_glob?</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>This method checks if the receiver contains IRC glob characters.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#irc_downcase-instance_method" title="#irc_downcase (instance method)">- (Object) <strong>irc_downcase</strong>(casemap = &#39;rfc1459&#39;) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>This method returns a string which is the downcased version of the
receiver, according to the given <em>casemap</em>.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#irc_downcase%21-instance_method" title="#irc_downcase! (instance method)">- (Object) <strong>irc_downcase!</strong>(casemap = &#39;rfc1459&#39;) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>This is the same as the above, except that the string is altered in place.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#irc_send_penalty-instance_method" title="#irc_send_penalty (instance method)">- (Object) <strong>irc_send_penalty</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Calculate the penalty which will be assigned to this message by the IRCd.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#irc_upcase-instance_method" title="#irc_upcase (instance method)">- (Object) <strong>irc_upcase</strong>(casemap = &#39;rfc1459&#39;) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Upcasing functions are provided too.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#irc_upcase%21-instance_method" title="#irc_upcase! (instance method)">- (Object) <strong>irc_upcase!</strong>(casemap = &#39;rfc1459&#39;) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>In-place upcasing.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#ircify_html-instance_method" title="#ircify_html (instance method)">- (Object) <strong>ircify_html</strong>(opts = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>This method will return a purified version of the receiver, with all HTML
stripped off and some of it converted to IRC formatting.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#ircify_html%21-instance_method" title="#ircify_html! (instance method)">- (Object) <strong>ircify_html!</strong>(opts = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>As above, but modify the receiver.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#ircify_html_title-instance_method" title="#ircify_html_title (instance method)">- (Object) <strong>ircify_html_title</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>This method returns the IRC-formatted version of an HTML title found in the
string.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#riphtml-instance_method" title="#riphtml (instance method)">- (Object) <strong>riphtml</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>This method will strip all HTML crud from the receiver.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#to_irc_auth_command-instance_method" title="#to_irc_auth_command (instance method)">- (Object) <strong>to_irc_auth_command</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns an Irc::Bot::Auth::Comand from the receiver.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#to_irc_casemap-instance_method" title="#to_irc_casemap (instance method)">- (Object) <strong>to_irc_casemap</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>This method returns the Irc::Casemap whose name is the receiver.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#to_irc_channel-instance_method" title="#to_irc_channel (instance method)">- (Object) <strong>to_irc_channel</strong>(opts = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>We keep extending String, this time adding a method that converts a String
into an Irc::Channel object.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#to_irc_channel_topic-instance_method" title="#to_irc_channel_topic (instance method)">- (Object) <strong>to_irc_channel_topic</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns an Irc::Channel::Topic with self as text.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#to_irc_netmask-instance_method" title="#to_irc_netmask (instance method)">- (Object) <strong>to_irc_netmask</strong>(opts = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>We keep extending String, this time adding a method that converts a String
into an Irc::Netmask object.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#to_irc_regexp-instance_method" title="#to_irc_regexp (instance method)">- (Object) <strong>to_irc_regexp</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>This method is used to convert the receiver into a Regular Expression that
matches according to the IRC glob syntax.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#to_irc_user-instance_method" title="#to_irc_user (instance method)">- (Object) <strong>to_irc_user</strong>(opts = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>We keep extending String, this time adding a method that converts a String
into an Irc::User object.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#wrap_nonempty-instance_method" title="#wrap_nonempty (instance method)">- (Object) <strong>wrap_nonempty</strong>(pre, post, opts = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>This method is used to wrap a nonempty String by adding the prefix and
postfix.</p>
</div></span>
  
</li>

      
    </ul>
  



  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="colorformat-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>colorformat</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Format a string using IRC colors</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


376
377
378
379
380
381
382</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/apoc/projects/ruby/rbot/lib/rbot/core/utils/extends.rb', line 376</span>

<span class='kw'>def</span> <span class='id identifier rubyid_colorformat'>colorformat</span>
  <span class='id identifier rubyid_txt'>txt</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_dup'>dup</span>

  <span class='id identifier rubyid_txt'>txt</span><span class='period'>.</span><span class='id identifier rubyid_gsub!'>gsub!</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\*([^\*]+)\*</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='const'>Bold</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>\\1</span><span class='tstring_end'>&#39;</span></span> <span class='op'>+</span> <span class='const'>NormalText</span><span class='rparen'>)</span>

  <span class='kw'>return</span> <span class='id identifier rubyid_txt'>txt</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_html_title-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>get_html_title</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>This method tries to find an HTML title in the string, and returns it if
found</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


349
350
351
352
353
354
355
356</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/apoc/projects/ruby/rbot/lib/rbot/core/utils/extends.rb', line 349</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_html_title'>get_html_title</span>
  <span class='kw'>if</span> <span class='kw'>defined?</span> <span class='op'>::</span><span class='const'>Hpricot</span>
    <span class='const'>Hpricot</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_at'>at</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>title</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_inner_html'>inner_html</span>
  <span class='kw'>else</span>
    <span class='kw'>return</span> <span class='kw'>unless</span> <span class='const'>Irc</span><span class='op'>::</span><span class='const'>Utils</span><span class='op'>::</span><span class='const'>TITLE_REGEX</span><span class='period'>.</span><span class='id identifier rubyid_match'>match</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span>
    <span class='backref'>$1</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="has_irc_glob?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>has_irc_glob?</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>This method checks if the receiver contains IRC glob characters</p>

<p>IRC has a very primitive concept of globs: a <code>*</code> stands for “any
number of arbitrary characters”, a <code>?</code> stands for “one and
exactly one arbitrary character”. These characters can be escaped by
prefixing them with a slash (<code>\</code>).</p>

<p>A known limitation of this glob syntax is that there is no way to escape
the escape character itself, so it&#39;s not possible to build a glob
pattern where the escape character precedes a glob.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


332
333
334</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/apoc/projects/ruby/rbot/lib/rbot/irc.rb', line 332</span>

<span class='kw'>def</span> <span class='id identifier rubyid_has_irc_glob?'>has_irc_glob?</span>
  <span class='kw'>self</span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^[*?]|[^\\][*?]</span><span class='regexp_end'>/</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="irc_downcase-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>irc_downcase</strong>(casemap = &#39;rfc1459&#39;) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>This method returns a string which is the downcased version of the
receiver, according to the given <em>casemap</em></p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


289
290
291
292</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/apoc/projects/ruby/rbot/lib/rbot/irc.rb', line 289</span>

<span class='kw'>def</span> <span class='id identifier rubyid_irc_downcase'>irc_downcase</span><span class='lparen'>(</span><span class='id identifier rubyid_casemap'>casemap</span><span class='op'>=</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>rfc1459</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_cmap'>cmap</span> <span class='op'>=</span> <span class='id identifier rubyid_casemap'>casemap</span><span class='period'>.</span><span class='id identifier rubyid_to_irc_casemap'>to_irc_casemap</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_tr'>tr</span><span class='lparen'>(</span><span class='id identifier rubyid_cmap'>cmap</span><span class='period'>.</span><span class='id identifier rubyid_upper'>upper</span><span class='comma'>,</span> <span class='id identifier rubyid_cmap'>cmap</span><span class='period'>.</span><span class='id identifier rubyid_lower'>lower</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="irc_downcase!-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>irc_downcase!</strong>(casemap = &#39;rfc1459&#39;) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>This is the same as the above, except that the string is altered in place</p>

<p>See also the discussion about irc_downcase</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


298
299
300
301</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/apoc/projects/ruby/rbot/lib/rbot/irc.rb', line 298</span>

<span class='kw'>def</span> <span class='id identifier rubyid_irc_downcase!'>irc_downcase!</span><span class='lparen'>(</span><span class='id identifier rubyid_casemap'>casemap</span><span class='op'>=</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>rfc1459</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_cmap'>cmap</span> <span class='op'>=</span> <span class='id identifier rubyid_casemap'>casemap</span><span class='period'>.</span><span class='id identifier rubyid_to_irc_casemap'>to_irc_casemap</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_tr!'>tr!</span><span class='lparen'>(</span><span class='id identifier rubyid_cmap'>cmap</span><span class='period'>.</span><span class='id identifier rubyid_upper'>upper</span><span class='comma'>,</span> <span class='id identifier rubyid_cmap'>cmap</span><span class='period'>.</span><span class='id identifier rubyid_lower'>lower</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="irc_send_penalty-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>irc_send_penalty</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Calculate the penalty which will be assigned to this message by the IRCd</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/apoc/projects/ruby/rbot/lib/rbot/ircsocket.rb', line 14</span>

<span class='kw'>def</span> <span class='id identifier rubyid_irc_send_penalty'>irc_send_penalty</span>
  <span class='comment'># According to eggdrop, the initial penalty is
</span>  <span class='id identifier rubyid_penalty'>penalty</span> <span class='op'>=</span> <span class='int'>1</span> <span class='op'>+</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span><span class='op'>/</span><span class='int'>100</span>
  <span class='comment'># on everything but UnderNET where it&#39;s
</span>  <span class='comment'># penalty = 2 + self.size/120
</span>
  <span class='id identifier rubyid_cmd'>cmd</span><span class='comma'>,</span> <span class='id identifier rubyid_pars'>pars</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='gvar'>$;</span><span class='comma'>,</span><span class='int'>2</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_debug'>debug</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>cmd: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_cmd'>cmd</span><span class='embexpr_end'>}</span><span class='tstring_content'>, pars: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_pars'>pars</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>case</span> <span class='id identifier rubyid_cmd'>cmd</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span>
  <span class='kw'>when</span> <span class='symbol'>:KICK</span>
    <span class='id identifier rubyid_chan'>chan</span><span class='comma'>,</span> <span class='id identifier rubyid_nick'>nick</span><span class='comma'>,</span> <span class='id identifier rubyid_msg'>msg</span> <span class='op'>=</span> <span class='id identifier rubyid_pars'>pars</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span>
    <span class='id identifier rubyid_chan'>chan</span> <span class='op'>=</span> <span class='id identifier rubyid_chan'>chan</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>,</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_nick'>nick</span> <span class='op'>=</span> <span class='id identifier rubyid_nick'>nick</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>,</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_penalty'>penalty</span> <span class='op'>+=</span> <span class='id identifier rubyid_nick'>nick</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span>
    <span class='id identifier rubyid_penalty'>penalty</span> <span class='op'>*=</span> <span class='id identifier rubyid_chan'>chan</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span>
  <span class='kw'>when</span> <span class='symbol'>:MODE</span>
    <span class='id identifier rubyid_chan'>chan</span><span class='comma'>,</span> <span class='id identifier rubyid_modes'>modes</span><span class='comma'>,</span> <span class='id identifier rubyid_argument'>argument</span> <span class='op'>=</span> <span class='id identifier rubyid_pars'>pars</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span>
    <span class='id identifier rubyid_extra'>extra</span> <span class='op'>=</span> <span class='int'>0</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_modes'>modes</span>
      <span class='id identifier rubyid_extra'>extra</span> <span class='op'>=</span> <span class='int'>1</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_argument'>argument</span>
        <span class='id identifier rubyid_extra'>extra</span> <span class='op'>+=</span> <span class='id identifier rubyid_modes'>modes</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\+|-</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span>
      <span class='kw'>else</span>
        <span class='id identifier rubyid_extra'>extra</span> <span class='op'>+=</span> <span class='int'>3</span> <span class='op'>*</span> <span class='id identifier rubyid_modes'>modes</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\+|-</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_argument'>argument</span>
      <span class='id identifier rubyid_extra'>extra</span> <span class='op'>+=</span> <span class='int'>2</span> <span class='op'>*</span> <span class='id identifier rubyid_argument'>argument</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_penalty'>penalty</span> <span class='op'>+=</span> <span class='id identifier rubyid_extra'>extra</span> <span class='op'>*</span> <span class='id identifier rubyid_chan'>chan</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span>
  <span class='kw'>when</span> <span class='symbol'>:TOPIC</span>
    <span class='id identifier rubyid_penalty'>penalty</span> <span class='op'>+=</span> <span class='int'>1</span>
    <span class='id identifier rubyid_penalty'>penalty</span> <span class='op'>+=</span> <span class='int'>2</span> <span class='kw'>unless</span> <span class='id identifier rubyid_pars'>pars</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>&lt;</span> <span class='int'>2</span>
  <span class='kw'>when</span> <span class='symbol'>:PRIVMSG</span><span class='comma'>,</span> <span class='symbol'>:NOTICE</span>
    <span class='id identifier rubyid_dests'>dests</span> <span class='op'>=</span> <span class='id identifier rubyid_pars'>pars</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='gvar'>$;</span><span class='comma'>,</span><span class='int'>2</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
    <span class='id identifier rubyid_penalty'>penalty</span> <span class='op'>+=</span> <span class='id identifier rubyid_dests'>dests</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>,</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span>
  <span class='kw'>when</span> <span class='symbol'>:WHO</span>
    <span class='id identifier rubyid_args'>args</span> <span class='op'>=</span> <span class='id identifier rubyid_pars'>pars</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_args'>args</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span> <span class='op'>&gt;</span> <span class='int'>0</span>
      <span class='id identifier rubyid_penalty'>penalty</span> <span class='op'>+=</span> <span class='id identifier rubyid_args'>args</span><span class='period'>.</span><span class='id identifier rubyid_inject'>inject</span><span class='lparen'>(</span><span class='int'>0</span><span class='rparen'>)</span><span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_sum'>sum</span><span class='comma'>,</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='id identifier rubyid_sum'>sum</span> <span class='op'>+=</span> <span class='lparen'>(</span><span class='lparen'>(</span><span class='id identifier rubyid_x'>x</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span> <span class='op'>&gt;</span> <span class='int'>4</span><span class='rparen'>)</span> <span class='op'>?</span> <span class='int'>3</span> <span class='op'>:</span> <span class='int'>5</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_penalty'>penalty</span> <span class='op'>+=</span> <span class='int'>10</span>
    <span class='kw'>end</span>
  <span class='kw'>when</span> <span class='symbol'>:PART</span>
    <span class='id identifier rubyid_penalty'>penalty</span> <span class='op'>+=</span> <span class='int'>4</span>
  <span class='kw'>when</span> <span class='symbol'>:AWAY</span><span class='comma'>,</span> <span class='symbol'>:JOIN</span><span class='comma'>,</span> <span class='symbol'>:VERSION</span><span class='comma'>,</span> <span class='symbol'>:TIME</span><span class='comma'>,</span> <span class='symbol'>:TRACE</span><span class='comma'>,</span> <span class='symbol'>:WHOIS</span><span class='comma'>,</span> <span class='symbol'>:DNS</span>
    <span class='id identifier rubyid_penalty'>penalty</span> <span class='op'>+=</span> <span class='int'>2</span>
  <span class='kw'>when</span> <span class='symbol'>:INVITE</span><span class='comma'>,</span> <span class='symbol'>:NICK</span>
    <span class='id identifier rubyid_penalty'>penalty</span> <span class='op'>+=</span> <span class='int'>3</span>
  <span class='kw'>when</span> <span class='symbol'>:ISON</span>
    <span class='id identifier rubyid_penalty'>penalty</span> <span class='op'>+=</span> <span class='int'>1</span>
  <span class='kw'>else</span> <span class='comment'># Unknown messages
</span>    <span class='id identifier rubyid_penalty'>penalty</span> <span class='op'>+=</span> <span class='int'>1</span>
  <span class='kw'>end</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_penalty'>penalty</span> <span class='op'>&gt;</span> <span class='int'>99</span>
    <span class='id identifier rubyid_debug'>debug</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Wow, more than 99 secs of penalty!</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_penalty'>penalty</span> <span class='op'>=</span> <span class='int'>99</span>
  <span class='kw'>end</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_penalty'>penalty</span> <span class='op'>&lt;</span> <span class='int'>2</span>
    <span class='id identifier rubyid_debug'>debug</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Wow, less than 2 secs of penalty!</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_penalty'>penalty</span> <span class='op'>=</span> <span class='int'>2</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_debug'>debug</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>penalty: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_penalty'>penalty</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>return</span> <span class='id identifier rubyid_penalty'>penalty</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="irc_upcase-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>irc_upcase</strong>(casemap = &#39;rfc1459&#39;) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Upcasing functions are provided too</p>

<p>See also the discussion about irc_downcase</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


307
308
309
310</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/apoc/projects/ruby/rbot/lib/rbot/irc.rb', line 307</span>

<span class='kw'>def</span> <span class='id identifier rubyid_irc_upcase'>irc_upcase</span><span class='lparen'>(</span><span class='id identifier rubyid_casemap'>casemap</span><span class='op'>=</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>rfc1459</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_cmap'>cmap</span> <span class='op'>=</span> <span class='id identifier rubyid_casemap'>casemap</span><span class='period'>.</span><span class='id identifier rubyid_to_irc_casemap'>to_irc_casemap</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_tr'>tr</span><span class='lparen'>(</span><span class='id identifier rubyid_cmap'>cmap</span><span class='period'>.</span><span class='id identifier rubyid_lower'>lower</span><span class='comma'>,</span> <span class='id identifier rubyid_cmap'>cmap</span><span class='period'>.</span><span class='id identifier rubyid_upper'>upper</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="irc_upcase!-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>irc_upcase!</strong>(casemap = &#39;rfc1459&#39;) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>In-place upcasing</p>

<p>See also the discussion about irc_downcase</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


316
317
318
319</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/apoc/projects/ruby/rbot/lib/rbot/irc.rb', line 316</span>

<span class='kw'>def</span> <span class='id identifier rubyid_irc_upcase!'>irc_upcase!</span><span class='lparen'>(</span><span class='id identifier rubyid_casemap'>casemap</span><span class='op'>=</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>rfc1459</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_cmap'>cmap</span> <span class='op'>=</span> <span class='id identifier rubyid_casemap'>casemap</span><span class='period'>.</span><span class='id identifier rubyid_to_irc_casemap'>to_irc_casemap</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_tr!'>tr!</span><span class='lparen'>(</span><span class='id identifier rubyid_cmap'>cmap</span><span class='period'>.</span><span class='id identifier rubyid_lower'>lower</span><span class='comma'>,</span> <span class='id identifier rubyid_cmap'>cmap</span><span class='period'>.</span><span class='id identifier rubyid_upper'>upper</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="ircify_html-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>ircify_html</strong>(opts = {}) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>This method will return a purified version of the receiver, with all HTML
stripped off and some of it converted to IRC formatting</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/apoc/projects/ruby/rbot/lib/rbot/core/utils/extends.rb', line 225</span>

<span class='kw'>def</span> <span class='id identifier rubyid_ircify_html'>ircify_html</span><span class='lparen'>(</span><span class='id identifier rubyid_opts'>opts</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_txt'>txt</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_dup'>dup</span>

  <span class='comment'># remove scripts
</span>  <span class='id identifier rubyid_txt'>txt</span><span class='period'>.</span><span class='id identifier rubyid_gsub!'>gsub!</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>&lt;script(?:\s+[^&gt;]*)?&gt;.*?&lt;\/script&gt;</span><span class='regexp_end'>/im</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>

  <span class='comment'># remove styles
</span>  <span class='id identifier rubyid_txt'>txt</span><span class='period'>.</span><span class='id identifier rubyid_gsub!'>gsub!</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>&lt;style(?:\s+[^&gt;]*)?&gt;.*?&lt;\/style&gt;</span><span class='regexp_end'>/im</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>

  <span class='comment'># bold and strong -&gt; bold
</span>  <span class='id identifier rubyid_txt'>txt</span><span class='period'>.</span><span class='id identifier rubyid_gsub!'>gsub!</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>&lt;\/?(?:b|strong)(?:\s+[^&gt;]*)?&gt;</span><span class='regexp_end'>/im</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='const'>Bold</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>

  <span class='comment'># italic, emphasis and underline -&gt; underline
</span>  <span class='id identifier rubyid_txt'>txt</span><span class='period'>.</span><span class='id identifier rubyid_gsub!'>gsub!</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>&lt;\/?(?:i|em|u)(?:\s+[^&gt;]*)?&gt;</span><span class='regexp_end'>/im</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='const'>Underline</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>

  <span class='comment'>## This would be a nice addition, but the results are horrible
</span>  <span class='comment'>## Maybe make it configurable?
</span>  <span class='comment'># txt.gsub!(/&lt;\/?a( [^&gt;]*)?&gt;/, &quot;#{Reverse}&quot;)
</span>  <span class='kw'>case</span> <span class='id identifier rubyid_val'>val</span> <span class='op'>=</span> <span class='id identifier rubyid_opts'>opts</span><span class='lbracket'>[</span><span class='symbol'>:a_href</span><span class='rbracket'>]</span>
  <span class='kw'>when</span> <span class='const'>Reverse</span><span class='comma'>,</span> <span class='const'>Bold</span><span class='comma'>,</span> <span class='const'>Underline</span>
    <span class='id identifier rubyid_txt'>txt</span><span class='period'>.</span><span class='id identifier rubyid_gsub!'>gsub!</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>&lt;(?:\/a\s*|a (?:[^&gt;]*\s+)?href\s*=\s*(?:[^&gt;]*\s*)?)&gt;</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='id identifier rubyid_val'>val</span><span class='rparen'>)</span>
  <span class='kw'>when</span> <span class='symbol'>:link_out</span>
    <span class='comment'># Not good for nested links, but the best we can do without something like hpricot
</span>    <span class='id identifier rubyid_txt'>txt</span><span class='period'>.</span><span class='id identifier rubyid_gsub!'>gsub!</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>&lt;a (?:[^&gt;]*\s+)?href\s*=\s*(?:([^&quot;&#39;&gt;][^\s&gt;]*)\s+|&quot;((?:[^&quot;]|\\&quot;)*)&quot;|&#39;((?:[^&#39;]|\\&#39;)*)&#39;)(?:[^&gt;]*\s+)?&gt;(.*?)&lt;\/a&gt;</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_match'>match</span><span class='op'>|</span>
      <span class='id identifier rubyid_debug'>debug</span> <span class='id identifier rubyid_match'>match</span>
      <span class='id identifier rubyid_debug'>debug</span> <span class='lbracket'>[</span><span class='backref'>$1</span><span class='comma'>,</span> <span class='backref'>$2</span><span class='comma'>,</span> <span class='backref'>$3</span><span class='comma'>,</span> <span class='backref'>$4</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span>
      <span class='id identifier rubyid_link'>link</span> <span class='op'>=</span> <span class='backref'>$1</span> <span class='op'>||</span> <span class='backref'>$2</span> <span class='op'>||</span> <span class='backref'>$3</span>
      <span class='id identifier rubyid_str'>str</span> <span class='op'>=</span> <span class='backref'>$4</span>
      <span class='id identifier rubyid_str'>str</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>: </span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span> <span class='id identifier rubyid_link'>link</span>
    <span class='rbrace'>}</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_warning'>warning</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>unknown :a_href option </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_val'>val</span><span class='embexpr_end'>}</span><span class='tstring_content'> passed to ircify_html</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_val'>val</span>
  <span class='kw'>end</span>

  <span class='comment'># If opts[:img] is defined, it should be a String. Each image
</span>  <span class='comment'># will be replaced by the string itself, replacing occurrences of
</span>  <span class='comment'># %{alt} %{dimensions} and %{src} with the alt text, image dimensions
</span>  <span class='comment'># and URL
</span>  <span class='kw'>if</span> <span class='id identifier rubyid_val'>val</span> <span class='op'>=</span> <span class='id identifier rubyid_opts'>opts</span><span class='lbracket'>[</span><span class='symbol'>:img</span><span class='rbracket'>]</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_val'>val</span><span class='period'>.</span><span class='id identifier rubyid_kind_of?'>kind_of?</span> <span class='const'>String</span>
      <span class='id identifier rubyid_txt'>txt</span><span class='period'>.</span><span class='id identifier rubyid_gsub!'>gsub!</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>&lt;img\s+(.*?)\s*\/?&gt;</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_imgtag'>imgtag</span><span class='op'>|</span>
        <span class='id identifier rubyid_attrs'>attrs</span> <span class='op'>=</span> <span class='const'>Hash</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
        <span class='id identifier rubyid_imgtag'>imgtag</span><span class='period'>.</span><span class='id identifier rubyid_scan'>scan</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>([[:alpha:]]+)\s*=\s*([&#39;&quot;])?(.*?)\2</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_quote'>quote</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span><span class='op'>|</span>
          <span class='id identifier rubyid_k'>k</span> <span class='op'>=</span> <span class='id identifier rubyid_key'>key</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span><span class='period'>.</span><span class='id identifier rubyid_intern'>intern</span> <span class='kw'>rescue</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>junk</span><span class='tstring_end'>&#39;</span></span>
          <span class='id identifier rubyid_attrs'>attrs</span><span class='lbracket'>[</span><span class='id identifier rubyid_k'>k</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_value'>value</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_attrs'>attrs</span><span class='lbracket'>[</span><span class='symbol'>:alt</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='id identifier rubyid_attrs'>attrs</span><span class='lbracket'>[</span><span class='symbol'>:title</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_attrs'>attrs</span><span class='lbracket'>[</span><span class='symbol'>:width</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>...</span><span class='tstring_end'>&#39;</span></span>
        <span class='id identifier rubyid_attrs'>attrs</span><span class='lbracket'>[</span><span class='symbol'>:height</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>...</span><span class='tstring_end'>&#39;</span></span>
        <span class='id identifier rubyid_attrs'>attrs</span><span class='lbracket'>[</span><span class='symbol'>:dimensions</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_attrs'>attrs</span><span class='lbracket'>[</span><span class='symbol'>:width</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>x</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_attrs'>attrs</span><span class='lbracket'>[</span><span class='symbol'>:height</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_val'>val</span> <span class='op'>%</span> <span class='id identifier rubyid_attrs'>attrs</span>
      <span class='kw'>end</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_warning'>warning</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>:img option is not a string</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='comment'># Paragraph and br tags are converted to whitespace
</span>  <span class='id identifier rubyid_txt'>txt</span><span class='period'>.</span><span class='id identifier rubyid_gsub!'>gsub!</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>&lt;\/?(p|br)(?:\s+[^&gt;]*)?\s*\/?\s*&gt;</span><span class='regexp_end'>/i</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_txt'>txt</span><span class='period'>.</span><span class='id identifier rubyid_gsub!'>gsub!</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_txt'>txt</span><span class='period'>.</span><span class='id identifier rubyid_gsub!'>gsub!</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\r</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>

  <span class='comment'># Superscripts and subscripts are turned into ^{...} and _{...}
</span>  <span class='comment'># where the {} are omitted for single characters
</span>  <span class='id identifier rubyid_txt'>txt</span><span class='period'>.</span><span class='id identifier rubyid_gsub!'>gsub!</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>&lt;sup&gt;(.*?)&lt;\/sup&gt;</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>^{\1}</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_txt'>txt</span><span class='period'>.</span><span class='id identifier rubyid_gsub!'>gsub!</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>&lt;sub&gt;(.*?)&lt;\/sub&gt;</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>_{\1}</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_txt'>txt</span><span class='period'>.</span><span class='id identifier rubyid_gsub!'>gsub!</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(^|_)\{(.)\}</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>\1\2</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>

  <span class='comment'># List items are converted to *). We don&#39;t have special support for
</span>  <span class='comment'># nested or ordered lists.
</span>  <span class='id identifier rubyid_txt'>txt</span><span class='period'>.</span><span class='id identifier rubyid_gsub!'>gsub!</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>&lt;li&gt;</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> *) </span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>

  <span class='comment'># All other tags are just removed
</span>  <span class='id identifier rubyid_txt'>txt</span><span class='period'>.</span><span class='id identifier rubyid_gsub!'>gsub!</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>&lt;[^&gt;]+&gt;</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>

  <span class='comment'># Convert HTML entities. We do it now to be able to handle stuff
</span>  <span class='comment'># such as &amp;nbsp;
</span>  <span class='id identifier rubyid_txt'>txt</span> <span class='op'>=</span> <span class='const'>Utils</span><span class='period'>.</span><span class='id identifier rubyid_decode_html_entities'>decode_html_entities</span><span class='lparen'>(</span><span class='id identifier rubyid_txt'>txt</span><span class='rparen'>)</span>

  <span class='comment'># Keep unbreakable spaces or conver them to plain spaces?
</span>  <span class='kw'>case</span> <span class='id identifier rubyid_val'>val</span> <span class='op'>=</span> <span class='id identifier rubyid_opts'>opts</span><span class='lbracket'>[</span><span class='symbol'>:nbsp</span><span class='rbracket'>]</span>
  <span class='kw'>when</span> <span class='symbol'>:space</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_txt'>txt</span><span class='period'>.</span><span class='id identifier rubyid_gsub!'>gsub!</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='int'>160</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_pack'>pack</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>U</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_warning'>warning</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>unknown :nbsp option </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_val'>val</span><span class='embexpr_end'>}</span><span class='tstring_content'> passed to ircify_html</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_val'>val</span>
  <span class='kw'>end</span>

  <span class='comment'># Remove double formatting options, since they only waste bytes
</span>  <span class='id identifier rubyid_txt'>txt</span><span class='period'>.</span><span class='id identifier rubyid_gsub!'>gsub!</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='embexpr_beg'>#{</span><span class='const'>Bold</span><span class='embexpr_end'>}</span><span class='tstring_content'>(\s*)</span><span class='embexpr_beg'>#{</span><span class='const'>Bold</span><span class='embexpr_end'>}</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>\1</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_txt'>txt</span><span class='period'>.</span><span class='id identifier rubyid_gsub!'>gsub!</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='embexpr_beg'>#{</span><span class='const'>Underline</span><span class='embexpr_end'>}</span><span class='tstring_content'>(\s*)</span><span class='embexpr_beg'>#{</span><span class='const'>Underline</span><span class='embexpr_end'>}</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>\1</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>

  <span class='comment'># Simplify whitespace that appears on both sides of a formatting option
</span>  <span class='id identifier rubyid_txt'>txt</span><span class='period'>.</span><span class='id identifier rubyid_gsub!'>gsub!</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\s+(</span><span class='embexpr_beg'>#{</span><span class='const'>Bold</span><span class='embexpr_end'>}</span><span class='tstring_content'>|</span><span class='embexpr_beg'>#{</span><span class='const'>Underline</span><span class='embexpr_end'>}</span><span class='tstring_content'>)\s+</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> \1</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_txt'>txt</span><span class='period'>.</span><span class='id identifier rubyid_sub!'>sub!</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\s+(</span><span class='embexpr_beg'>#{</span><span class='const'>Bold</span><span class='embexpr_end'>}</span><span class='tstring_content'>|</span><span class='embexpr_beg'>#{</span><span class='const'>Underline</span><span class='embexpr_end'>}</span><span class='tstring_content'>)\z</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>\1</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_txt'>txt</span><span class='period'>.</span><span class='id identifier rubyid_sub!'>sub!</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\A(</span><span class='embexpr_beg'>#{</span><span class='const'>Bold</span><span class='embexpr_end'>}</span><span class='tstring_content'>|</span><span class='embexpr_beg'>#{</span><span class='const'>Underline</span><span class='embexpr_end'>}</span><span class='tstring_content'>)\s+</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>\1</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>

  <span class='comment'># And finally whitespace is squeezed
</span>  <span class='id identifier rubyid_txt'>txt</span><span class='period'>.</span><span class='id identifier rubyid_gsub!'>gsub!</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\s+</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_txt'>txt</span><span class='period'>.</span><span class='id identifier rubyid_strip!'>strip!</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_opts'>opts</span><span class='lbracket'>[</span><span class='symbol'>:limit</span><span class='rbracket'>]</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_txt'>txt</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>&gt;</span> <span class='id identifier rubyid_opts'>opts</span><span class='lbracket'>[</span><span class='symbol'>:limit</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_txt'>txt</span> <span class='op'>=</span> <span class='id identifier rubyid_txt'>txt</span><span class='period'>.</span><span class='id identifier rubyid_slice'>slice</span><span class='lparen'>(</span><span class='int'>0</span><span class='comma'>,</span> <span class='id identifier rubyid_opts'>opts</span><span class='lbracket'>[</span><span class='symbol'>:limit</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='const'>Reverse</span><span class='embexpr_end'>}</span><span class='tstring_content'>...</span><span class='embexpr_beg'>#{</span><span class='const'>Reverse</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='comment'># Decode entities and strip whitespace
</span>  <span class='kw'>return</span> <span class='id identifier rubyid_txt'>txt</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="ircify_html!-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>ircify_html!</strong>(opts = {}) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>As above, but modify the receiver</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


335
336
337
338
339</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/apoc/projects/ruby/rbot/lib/rbot/core/utils/extends.rb', line 335</span>

<span class='kw'>def</span> <span class='id identifier rubyid_ircify_html!'>ircify_html!</span><span class='lparen'>(</span><span class='id identifier rubyid_opts'>opts</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_old_hash'>old_hash</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_hash'>hash</span>
  <span class='id identifier rubyid_replace'>replace</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_ircify_html'>ircify_html</span><span class='lparen'>(</span><span class='id identifier rubyid_opts'>opts</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>self</span> <span class='kw'>unless</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_hash'>hash</span> <span class='op'>==</span> <span class='id identifier rubyid_old_hash'>old_hash</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="ircify_html_title-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>ircify_html_title</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>This method returns the IRC-formatted version of an HTML title found in the
string</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


360
361
362</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/apoc/projects/ruby/rbot/lib/rbot/core/utils/extends.rb', line 360</span>

<span class='kw'>def</span> <span class='id identifier rubyid_ircify_html_title'>ircify_html_title</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_get_html_title'>get_html_title</span><span class='period'>.</span><span class='id identifier rubyid_ircify_html'>ircify_html</span> <span class='kw'>rescue</span> <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="riphtml-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>riphtml</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>This method will strip all HTML crud from the receiver</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


343
344
345</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/apoc/projects/ruby/rbot/lib/rbot/core/utils/extends.rb', line 343</span>

<span class='kw'>def</span> <span class='id identifier rubyid_riphtml'>riphtml</span>
  <span class='const'>Utils</span><span class='period'>.</span><span class='id identifier rubyid_decode_html_entities'>decode_html_entities</span><span class='lparen'>(</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>&lt;\s*br\s*\/?\s*&gt;</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>&lt;[^&gt;]+&gt;</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\s+</span><span class='regexp_end'>/</span></span><span class='comma'>,</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="to_irc_auth_command-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>to_irc_auth_command</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns an Irc::Bot::Auth::Comand from the receiver</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


120
121
122</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/apoc/projects/ruby/rbot/lib/rbot/botuser.rb', line 120</span>

<span class='kw'>def</span> <span class='id identifier rubyid_to_irc_auth_command'>to_irc_auth_command</span>
  <span class='const'>Irc</span><span class='op'>::</span><span class='const'>Bot</span><span class='op'>::</span><span class='const'>Auth</span><span class='op'>::</span><span class='const'>Command</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="to_irc_casemap-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>to_irc_casemap</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>This method returns the Irc::Casemap whose name is the receiver</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


275
276
277
278
279
280
281
282
283</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/apoc/projects/ruby/rbot/lib/rbot/irc.rb', line 275</span>

<span class='kw'>def</span> <span class='id identifier rubyid_to_irc_casemap'>to_irc_casemap</span>
  <span class='kw'>begin</span>
    <span class='const'>Irc</span><span class='op'>::</span><span class='const'>Casemap</span><span class='period'>.</span><span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span>
  <span class='kw'>rescue</span>
    <span class='comment'># raise TypeError, &quot;Unkown Irc::Casemap #{self.inspect}&quot;
</span>    <span class='id identifier rubyid_error'>error</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Unkown Irc::Casemap </span><span class='embexpr_beg'>#{</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_content'> requested, defaulting to rfc1459</span><span class='tstring_end'>&quot;</span></span>
    <span class='const'>Irc</span><span class='op'>::</span><span class='const'>Casemap</span><span class='period'>.</span><span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>rfc1459</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="to_irc_channel-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>to_irc_channel</strong>(opts = {}) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>We keep extending String, this time adding a method that converts a String
into an Irc::Channel object</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1513
1514
1515</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/apoc/projects/ruby/rbot/lib/rbot/irc.rb', line 1513</span>

<span class='kw'>def</span> <span class='id identifier rubyid_to_irc_channel'>to_irc_channel</span><span class='lparen'>(</span><span class='id identifier rubyid_opts'>opts</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='const'>Irc</span><span class='op'>::</span><span class='const'>Channel</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='id identifier rubyid_opts'>opts</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="to_irc_channel_topic-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>to_irc_channel_topic</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns an Irc::Channel::Topic with self as text</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1318
1319
1320</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/apoc/projects/ruby/rbot/lib/rbot/irc.rb', line 1318</span>

<span class='kw'>def</span> <span class='id identifier rubyid_to_irc_channel_topic'>to_irc_channel_topic</span>
  <span class='const'>Irc</span><span class='op'>::</span><span class='const'>Channel</span><span class='op'>::</span><span class='const'>Topic</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="to_irc_netmask-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>to_irc_netmask</strong>(opts = {}) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>We keep extending String, this time adding a method that converts a String
into an Irc::Netmask object</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


915
916
917</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/apoc/projects/ruby/rbot/lib/rbot/irc.rb', line 915</span>

<span class='kw'>def</span> <span class='id identifier rubyid_to_irc_netmask'>to_irc_netmask</span><span class='lparen'>(</span><span class='id identifier rubyid_opts'>opts</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='const'>Irc</span><span class='op'>::</span><span class='const'>Netmask</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='id identifier rubyid_opts'>opts</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="to_irc_regexp-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>to_irc_regexp</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>This method is used to convert the receiver into a Regular Expression that
matches according to the IRC glob syntax</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/apoc/projects/ruby/rbot/lib/rbot/irc.rb', line 339</span>

<span class='kw'>def</span> <span class='id identifier rubyid_to_irc_regexp'>to_irc_regexp</span>
  <span class='id identifier rubyid_regmask'>regmask</span> <span class='op'>=</span> <span class='const'>Regexp</span><span class='period'>.</span><span class='id identifier rubyid_escape'>escape</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_regmask'>regmask</span><span class='period'>.</span><span class='id identifier rubyid_gsub!'>gsub!</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(\\\\)?\\[*?]</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_m'>m</span><span class='op'>|</span>
    <span class='kw'>case</span> <span class='id identifier rubyid_m'>m</span>
    <span class='kw'>when</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\\(\\[*?])</span><span class='regexp_end'>/</span></span>
      <span class='backref'>$1</span>
    <span class='kw'>when</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\\\*</span><span class='regexp_end'>/</span></span>
      <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>.*</span><span class='tstring_end'>&#39;</span></span>
    <span class='kw'>when</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\\\?</span><span class='regexp_end'>/</span></span>
      <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>.</span><span class='tstring_end'>&#39;</span></span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Unexpected match </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_m'>m</span><span class='embexpr_end'>}</span><span class='tstring_content'> when converting </span><span class='embexpr_beg'>#{</span><span class='kw'>self</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
  <span class='rbrace'>}</span>
  <span class='const'>Regexp</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>^</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_regmask'>regmask</span><span class='embexpr_end'>}</span><span class='tstring_content'>$</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="to_irc_user-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>to_irc_user</strong>(opts = {}) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>We keep extending String, this time adding a method that converts a String
into an Irc::User object</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1108
1109
1110</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/apoc/projects/ruby/rbot/lib/rbot/irc.rb', line 1108</span>

<span class='kw'>def</span> <span class='id identifier rubyid_to_irc_user'>to_irc_user</span><span class='lparen'>(</span><span class='id identifier rubyid_opts'>opts</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='const'>Irc</span><span class='op'>::</span><span class='const'>User</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='id identifier rubyid_opts'>opts</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="wrap_nonempty-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>wrap_nonempty</strong>(pre, post, opts = {}) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>This method is used to wrap a nonempty String by adding the prefix and
postfix</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


366
367
368
369
370
371
372</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/apoc/projects/ruby/rbot/lib/rbot/core/utils/extends.rb', line 366</span>

<span class='kw'>def</span> <span class='id identifier rubyid_wrap_nonempty'>wrap_nonempty</span><span class='lparen'>(</span><span class='id identifier rubyid_pre'>pre</span><span class='comma'>,</span> <span class='id identifier rubyid_post'>post</span><span class='comma'>,</span> <span class='id identifier rubyid_opts'>opts</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
    <span class='const'>String</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
  <span class='kw'>else</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_pre'>pre</span><span class='embexpr_end'>}</span><span class='embexpr_beg'>#{</span><span class='kw'>self</span><span class='embexpr_end'>}</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_post'>post</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

    <div id="footer">
  Generated on Mon Mar  9 04:49:03 2015 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.8.7.6 (ruby-2.2.0).
</div>

  </body>
</html>